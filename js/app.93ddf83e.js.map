{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?1dde","webpack:///./src/components/Spreadsheet/Index.vue?7651","webpack:///./src/components/alterpanel/Index.vue?999a","webpack:///./src/App.vue?ebb0","webpack:///./src/components/HeaderView.vue?575e","webpack:///./src/utils.js","webpack:///./src/CONSTANT.js","webpack:///src/components/HeaderView.vue","webpack:///./src/components/HeaderView.vue?efa2","webpack:///./src/components/HeaderView.vue","webpack:///./src/components/RelationView.vue?bb3e","webpack:///./src/components/Spreadsheet/Index.vue?a954","webpack:///./src/components/Spreadsheet/Cell.vue?4874","webpack:///src/components/Spreadsheet/Cell.vue","webpack:///./src/components/Spreadsheet/Cell.vue?94e0","webpack:///./src/components/Spreadsheet/Cell.vue","webpack:///src/components/Spreadsheet/Index.vue","webpack:///./src/components/Spreadsheet/Index.vue?fcda","webpack:///./src/components/Spreadsheet/Index.vue","webpack:///src/components/RelationView.vue","webpack:///./src/components/RelationView.vue?99a2","webpack:///./src/components/RelationView.vue","webpack:///./src/components/SpreadsheetView.vue?de8e","webpack:///src/components/SpreadsheetView.vue","webpack:///./src/components/SpreadsheetView.vue?1b89","webpack:///./src/components/SpreadsheetView.vue","webpack:///./src/components/SuggestionView.vue?fe62","webpack:///./src/components/Varunit/Index.vue?35a2","webpack:///./src/components/alterpanel/Index.vue?3638","webpack:///src/components/alterpanel/Index.vue","webpack:///./src/components/alterpanel/Index.vue?35e5","webpack:///./src/components/alterpanel/Index.vue","webpack:///src/components/Varunit/Index.vue","webpack:///./src/components/Varunit/Index.vue?1860","webpack:///./src/components/Varunit/Index.vue","webpack:///src/components/SuggestionView.vue","webpack:///./src/components/SuggestionView.vue?a274","webpack:///./src/components/SuggestionView.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/store/index.js","webpack:///./src/components/Mycollapse/Index.vue?7001","webpack:///src/components/Mycollapse/Index.vue","webpack:///./src/components/Mycollapse/Index.vue?4ba8","webpack:///./src/components/Mycollapse/Index.vue","webpack:///./src/components/Mycollapsepanel/Index.vue?0512","webpack:///src/components/Mycollapsepanel/Index.vue","webpack:///./src/components/Mycollapsepanel/Index.vue?28d8","webpack:///./src/components/Mycollapsepanel/Index.vue","webpack:///./src/main.js","webpack:///./src/components/RelationView.vue?2008","webpack:///./src/components/SuggestionView.vue?ae3a","webpack:///./src/components/SpreadsheetView.vue?8a96","webpack:///./src/components/Mycollapsepanel/Index.vue?8157","webpack:///./src/components/HeaderView.vue?4841","webpack:///./src/components/Mycollapse/Index.vue?1f82","webpack:///./src/components/Varunit/Index.vue?14ed"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","staticClass","_v","staticStyle","on","handleChange","_l","id","JSON","stringify","_s","importDataset","importNewData","onChangeMode","model","callback","$$v","expression","Suggestion","relation","spec","description","rowNum","colNum","children","generateSuggestions","partialSpec","suggestions","entities","entityNum","indexes","Array","fill","map","_","index","currEntityNum","combinations","computeCombination","suggestion","combination","combinationEntityNames","filter","includes","entity","otherEntityNames","rowHeadingSpec","linkEntityNamesByOperator","bodySpec","num","totalCombination","selectedIndex","toCombineIndexes","forEach","entityNames","operator","reduce","total","currValue","currIndex","genRandomColor","Math","floor","random","g","b","a","baseAlpha","res","alpha","unique","from","Set","checkValidSpec","calString","String","attribute","parameters","item","tmp","stringfySpec","row","column","body","isCategorical","valueList","specObj2List","specObj","concat","refineStrName","obj","strName","genAlterSpec","row_header","column_header","specList","rowlen","collen","num_attr","Error","cur","tmprow","tmpcol","genSpec","genExploreSpec","attrInfo","specListWithAdd","unusedSpec","deleteUsedSpec","tmpbody","spec2","item_str","header","mapTable","table","rowInfo","colInfo","rowSize","columnSize","newRowSize","len","newColumnSize","newTable","oldx","oldy","dx","dy","EXAMPLE_DATA","selectedValue","computed","methods","storeAssociationRule","assign","component","relations","onTabEdit","onTabChange","entityOrder","color","attr","attrDragHandler","attrDropHandler","attrAllowDrop","$event","preventDefault","openMenu","style","_e","directives","rawName","left","top","menuSortEnable","menuSort","menuFilterEnable","rightClickItem","rightClickItemIsCategorical","onFilterCheckboxChange","menuFilterValue","menuFilterLowerBound","menuFilterUpperBound","menuBinEnable","menuBinLowerBound","menuBinUpperBound","menuBinStep","onMenuApply","onMenuReset","cellValue","headColor","class","leftHightlightedCell","checkLeftHightlighted","topHightlightedCell","checkTopHightlighted","editable","cellChangeHandler","leftDropHandler","topDropHandler","leftHoverHandler","topHoverHandler","dragLeaveHandler","cellColor","realValue","draggable","dragHandler","dropHandler","allowDrop","inputHandler","props","type","Boolean","default","created","lower","event","dataTransfer","setData","target","dataset","info","sessionStorage","setItem","setDragSource","$emit","offsetY","getData","isDrag","console","log","offsetX","innerText","head","initRowNum","Number","initColNum","Table","leftHightlightedRow","leftHightlightedColumn","topHightlightedRow","topHightlightedColumn","leftHovered","topHovered","initTable","watch","storeCurrentTable","val","newRow","parse","source","undefined","$set","storeCurrentActiveGrid","partialSpecSuggestion","storePartialSpecSuggestion","$forceUpdate","currentActiveGrid","dragSourceIsCell","searchValue","isinValueList","disambiguateCell","dragSource","partialSpecList","$message","error","disambiguateRow","itemDescription","sourceDescription","components","Cell","visible","associationRule","document","addEventListener","closeMenu","removeEventListener","changeActivatedRelationIndex","targetIndex","action","removeRelationByIndex","stopPropagation","op1","op2","colorList","storeAttrInfo","max","min","y","x","op","sort","reverse","low","round","high","attributeName","Spreadsheet","currentTable","dragoverHandler","dragstartHandler","resetHandler","newSpec","setSpec","storeNewSpec","storeAlterSpecList","alterSpec","storeSuggestion","exploreSpec","err","message","applyHandler","onInput","preNode","current","sourceList","checkListType","parentNode","sourceIndex","_index","className","targetList","preItem","newId","rawRelations","target_table","sch","el","previousElementSibling","listToId","index2","applyPartialSpec","alterSpecList","applySpec","handleApply","index3","alterSuggestion","mounted","content","newContent","finalContent","calcExplore","alterpanel","onSuggestionClick","storeRowInfo","storeColInfo","Varunit","HeaderView","RelationView","SpreadsheetView","SuggestionView","Vue","use","Vuex","state","activatedRelationIndex","mutations","addRawRelation","addRelation","addAttrInfo","mutateDragSource","isCell","changeSuggestion","changeCurrentTable","changeAssociationRule","newRule","changeAlterSpecList","newList","changeNewSpec","changePartialSpecSuggestion","newSuggestion","changeRowHeader","changeColumnHeader","changeBody","changeCurrentActiveGrid","changeRowInfo","changeColInfo","actions","storeRawRelation","commit","storeRelation","Store","activeKeys","_t","newActiveKeys","oldActiveKeys","RCollapse","slot","handleClick","firstClick","e","lastChild","tagName","transform","newstr","RCollapsePanel","config","productionTip","Select","Input","Button","Tabs","Collapse","Radio","Checkbox","InputNumber","Switch","Empty","Mycollapse","Mycollapsepanel","store","render","h","App","$mount"],"mappings":"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","file":"js/app.93ddf83e.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&id=3205b140&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{attrs:{\"id\":\"header-container\"}},[_c('header-view')],1),_c('div',{attrs:{\"id\":\"body-container\"}},[_c('div',{attrs:{\"id\":\"extractor-container\"}},[_c('div',{attrs:{\"id\":\"relation-container\"}},[_c('relation-view')],1)]),_c('div',{attrs:{\"id\":\"spreadsheet-container\"}},[_c('spreadsheet-view')],1),_c('div',{attrs:{\"id\":\"suggestion-container\"}},[_c('suggestion-view')],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header-view\"},[_c('div',{attrs:{\"id\":\"rigel-title\"}},[_vm._v(\"Rigel\")]),_c('div',{attrs:{\"id\":\"dataset-toolbar\"}},[_c('div',{staticClass:\"header-title\"},[_vm._v(\"Datasets:\")]),_c('div',{attrs:{\"id\":\"dataset-select\"}},[_c('a-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"Select Example Data\",\"allowClear\":true},on:{\"change\":_vm.handleChange}},_vm._l((_vm.EXAMPLE_DATA),function(data){return _c('a-select-option',{key:data.id,attrs:{\"value\":JSON.stringify(data)}},[_vm._v(\" \"+_vm._s(data.id)+\" \")])}),1)],1),_c('a-button',{staticClass:\"header-button\",staticStyle:{\"width\":\"62px\"},attrs:{\"id\":\"chooseFile\"},on:{\"click\":_vm.importDataset}},[_vm._v(\"Import\")]),_c('a-button',{staticClass:\"header-button\",staticStyle:{\"width\":\"95px\"},attrs:{\"id\":\"chooseFile\"},on:{\"click\":_vm.importNewData}},[_vm._v(\"Import New\")])],1),_c('div',{attrs:{\"id\":\"undo-redo-toolbar\"}},[_c('a-button',{staticClass:\"header-button\",staticStyle:{\"width\":\"62px\"}},[_vm._v(\"Undo\")]),_c('a-button',{staticClass:\"header-button\",staticStyle:{\"width\":\"62px\"}},[_vm._v(\"Redo\")])],1),_c('div',{attrs:{\"id\":\"associate-toolbar\"}},[_c('div',{staticClass:\"header-title\"},[_vm._v(\"Associate:\")]),_c('a-radio-group',{attrs:{\"default-value\":\"union\"},on:{\"change\":_vm.onChangeMode},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},[_c('a-radio-button',{staticClass:\"header-button\",staticStyle:{\"width\":\"125px\"},attrs:{\"value\":\"union\"}},[_vm._v(\"Union(Outer Join)\")]),_c('a-radio-button',{staticClass:\"header-button\",staticStyle:{\"width\":\"160px\"},attrs:{\"value\":\"intersect\"}},[_vm._v(\"Intersection(Inner Join)\")])],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { clearConfigCache } from \"prettier\";\r\n\r\nclass Spec {\r\n  constructor() {\r\n    // this. ...\r\n  }\r\n}\r\n\r\nclass Suggestion {\r\n  constructor(relation, spec, description) {\r\n    this.relation = relation;\r\n    this.spec = spec;\r\n    this.description = description;\r\n    this.rowNum = 0;\r\n    this.colNum = 0;\r\n    this.children = [];\r\n  }\r\n\r\n  computeMetaData() {\r\n    if (this.spec) {\r\n      // this.rowNum = ...;\r\n      // this.colNum = ...;\r\n    }\r\n  }\r\n}\r\n\r\n// 生成推荐列表\r\n// 交互过程中，partialSpec 会进行剪枝\r\nconst generateSuggestions = (relation, partialSpec) => {\r\n  const suggestions = [];\r\n  const entities = relation.entities;\r\n  const entityNum = entities.length;\r\n  const indexes = new Array(entityNum).fill(0).map((_, index) => index);\r\n\r\n  for (let currEntityNum = 1; currEntityNum < entityNum; currEntityNum++) {\r\n    const combinations = computeCombination(indexes, currEntityNum);\r\n    const description =\r\n      currEntityNum === 1 ? \"1 entity\" : `${currEntityNum} entities`;\r\n    const suggestion = new Suggestion(relation, \"\", description);\r\n    for (const combination of combinations) {\r\n      const combinationEntityNames = entities\r\n        .filter((_, index) => combination.includes(index))\r\n        .map((entity) => entity.name);\r\n      const otherEntityNames = entities\r\n        .filter((_, index) => !combination.includes(index))\r\n        .map((entity) => entity.name);\r\n\r\n      const rowHeadingSpec = linkEntityNamesByOperator(\r\n        combinationEntityNames,\r\n        \"×\"\r\n      );\r\n      const bodySpec = linkEntityNamesByOperator(otherEntityNames, \"+\");\r\n      const spec = `(${rowHeadingSpec}), () -> (${bodySpec})`;\r\n      suggestion.children.push(\r\n        new Suggestion(\r\n          relation,\r\n          spec,\r\n          linkEntityNamesByOperator(combinationEntityNames, \"×\")\r\n        )\r\n      );\r\n    }\r\n    suggestions.push(suggestion);\r\n  }\r\n  return suggestions;\r\n};\r\n\r\n// 生成排列组合\r\nconst computeCombination = (indexes, num) => {\r\n  if (num === 1) {\r\n    return indexes.map((index) => [index]);\r\n  } else {\r\n    const totalCombination = [];\r\n    for (const selectedIndex of indexes) {\r\n      // 组合的核心步骤，要求排好序\r\n      const toCombineIndexes = indexes.filter((index) => index > selectedIndex);\r\n      const combinations = computeCombination(toCombineIndexes, num - 1);\r\n      combinations.forEach((combination) => {\r\n        combination.push(selectedIndex);\r\n      });\r\n      totalCombination.push(...combinations);\r\n    }\r\n    return totalCombination;\r\n  }\r\n};\r\n\r\n// 连接实体名字符串\r\nconst linkEntityNamesByOperator = (entityNames, operator) => {\r\n  return entityNames.reduce((total, currValue, currIndex) => {\r\n    if (currIndex === 0) return `${currValue}`;\r\n    else return `${total} ${operator} ${currValue}`;\r\n  });\r\n};\r\n\r\n// 生成随机颜色\r\nconst genRandomColor = (length) => {\r\n  if (length == 0) {\r\n    return [];\r\n  }\r\n  var r = Math.floor(Math.random() * 256); //随机生成256以内r值\r\n  var g = Math.floor(Math.random() * 256); //随机生成256以内g值\r\n  var b = Math.floor(Math.random() * 256); //随机生成256以内b值\r\n  var a = Math.random();\r\n  if (length == 1) {\r\n    return [`rgb(${r},${g},${b},${a})`];\r\n  }\r\n  const baseAlpha = 0.1; //基准透明度\r\n  var res = [];\r\n  for (var i = 0; i < length; i++) {\r\n    let alpha = baseAlpha + (1.0 - baseAlpha) / length * (1 + i);\r\n    res.push(`rgb(${r},${g},${b},${alpha})`);\r\n  }\r\n  return res;\r\n}\r\n\r\n// 数组去重\r\nconst unique = (a) => {\r\n  return Array.from(new Set(a));\r\n}\r\n\r\n// 判断spec是否合法\r\nconst checkValidSpec = (spec) => {\r\n  if (!(\"row_header\" in spec) && !(\"column_header\" in spec)) {\r\n    return false;\r\n  }\r\n  // if (!(\"body\" in spec)) {\r\n  //   return false;\r\n  // }\r\n  return true;\r\n}\r\n\r\n// 字符串化spec\r\nconst calString = (spec) => {\r\n  if (!spec) return \"\";\r\n  if (spec.value) {\r\n    return String(spec.value);\r\n  } else if (spec.operator === \"attr\") {\r\n    return `${spec.data}.${spec.attribute}`;\r\n  } else {\r\n    let res = [];\r\n    spec.parameters.forEach(item => {\r\n      res.push(calString(item));\r\n    })\r\n    if (spec.operator == \"cross\" || spec.operator == \"add\") {\r\n      let tmp = res[0];\r\n      for (let i = 1; i < res.length; i++) {\r\n        tmp += ` × ${res[i]}`;\r\n      }\r\n      return tmp;\r\n    } else {\r\n      let tmp = spec.operator + \"(\";\r\n      for (let i = 0; i < res.length; i++) {\r\n        if (i == 0) {\r\n          tmp = tmp + res[i];\r\n        } else {\r\n          tmp = tmp + \", \" + res[i];\r\n        }\r\n      }\r\n      tmp = tmp + \")\";\r\n      return tmp;\r\n    }\r\n  }\r\n}\r\n\r\nconst stringfySpec = (spec) => {\r\n  // console.log(spec);\r\n  let row = calString(spec[\"row_header\"]);\r\n  let column = calString(spec[\"column_header\"]);\r\n  let body = calString(spec[\"body\"]);\r\n  return `(${row}), (${column}) => (${body})`;\r\n}\r\n\r\n//判断attribute是否为categorical\r\nconst isCategorical = (valueList) => {\r\n  for (let i = 0; i < valueList.length; i++) {\r\n    if (typeof (valueList[i]) != \"number\") {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\n//将row_header等spec object转为数组形式\r\nconst specObj2List = (specObj) => {\r\n  if (!specObj) return [];\r\n  if (specObj.operator == \"cross\" || specObj.operator == \"add\") {\r\n    return specObj2List(specObj.parameters[0]).concat(specObj2List(specObj.parameters[1]));\r\n  } else {\r\n    return [specObj];\r\n  }\r\n}\r\n\r\n//修正strName（临时功能，后面再优化吧）\r\nconst refineStrName = (obj) => {\r\n  return obj.strName ? obj.strName : obj;\r\n}\r\n\r\n//给定spec，生成alternative suggestion\r\nconst genAlterSpec = (row_header, column_header, body) => {\r\n  let specList = [];\r\n  let rowlen = row_header.length,\r\n    collen = column_header.length;\r\n  let num_attr = rowlen + collen;\r\n  if (num_attr > 5) {\r\n    throw new Error(\r\n      \"Too many attributes in header, alternative generation disabled\"\r\n    );\r\n  } else {\r\n    let cur = (1 << num_attr) - (1 << rowlen);\r\n    let tmprow = [],\r\n      tmpcol = [];\r\n    for (let i = 0; i < 1 << num_attr; i++) {\r\n      if (i == cur) continue;\r\n      (tmprow = []), (tmpcol = []);\r\n      for (let j = 0; j < num_attr; j++) {\r\n        let item =\r\n          j < rowlen ? row_header[j] : column_header[j - rowlen];\r\n        if ((i >> j) & 1) {\r\n          tmpcol.push(item);\r\n        } else {\r\n          tmprow.push(item);\r\n        }\r\n      }\r\n      let spec = genSpec(tmprow, tmpcol, body);\r\n      spec[\"description\"] = stringfySpec(spec);\r\n      specList.push(spec);\r\n    }\r\n  }\r\n  return specList;\r\n  // this.storeAlterSpecList(specList);\r\n}\r\n\r\nconst genSpec = (row_header, column_header, body) => {\r\n  // console.log(row_header, column_header);\r\n  let spec = {};\r\n  if (row_header.length == 1) {\r\n    spec[\"row_header\"] = refineStrName(row_header[0]);\r\n  } else if (row_header.length > 1) {\r\n    spec[\"row_header\"] = refineStrName(\r\n      row_header[row_header.length - 1]\r\n    );\r\n    for (let i = row_header.length - 2; i >= 0; i--) {\r\n      spec[\"row_header\"] = {\r\n        operator: \"cross\",\r\n        parameters: [\r\n          refineStrName(row_header[i]),\r\n          spec[\"row_header\"],\r\n        ],\r\n      };\r\n    }\r\n  }\r\n  if (column_header.length == 1) {\r\n    spec[\"column_header\"] = refineStrName(column_header[0]);\r\n  } else if (column_header.length > 1) {\r\n    spec[\"column_header\"] = refineStrName(\r\n      column_header[column_header.length - 1]\r\n    );\r\n    for (let i = column_header.length - 2; i >= 0; i--) {\r\n      spec[\"column_header\"] = {\r\n        operator: \"cross\",\r\n        parameters: [\r\n          refineStrName(column_header[i]),\r\n          spec[\"column_header\"],\r\n        ],\r\n      };\r\n    }\r\n  }\r\n  if (body.length == 1) {\r\n    spec[\"body\"] = refineStrName(body[0]);\r\n  } else if (body.length > 1) {\r\n    spec[\"body\"] = refineStrName(body[body.length - 1]);\r\n    for (let i = body.length - 2; i >= 0; i--) {\r\n      spec[\"body\"] = {\r\n        operator: \"add\",\r\n        parameters: [refineStrName(body[i]), spec[\"body\"]],\r\n      };\r\n    }\r\n  }\r\n  return spec;\r\n}\r\n\r\nconst genExploreSpec = (row_header, column_header, body, attrInfo) => {\r\n  let specListWithAdd = [];\r\n  let unusedSpec = [];\r\n  if(attrInfo) {\r\n    attrInfo.forEach((item) => {\r\n      unusedSpec.push(item);\r\n    });\r\n  }\r\n  deleteUsedSpec(unusedSpec, row_header);\r\n  deleteUsedSpec(unusedSpec, column_header);\r\n  deleteUsedSpec(unusedSpec, body);\r\n  if(!unusedSpec) {\r\n    return specListWithAdd;\r\n  }\r\n  unusedSpec.forEach((item) => {\r\n    let specList = [];\r\n    let tmprow = [],\r\n      tmpcol = [],\r\n      tmpbody = [];\r\n    if(row_header) {\r\n      row_header.forEach((t) => {\r\n        tmprow.push(t);\r\n      });\r\n    }\r\n    if(column_header) {\r\n      column_header.forEach((t) => {\r\n        tmpcol.push(t);\r\n      });\r\n    }\r\n    if(body) {\r\n      body.forEach((t) => {\r\n        tmpbody.push(t);\r\n      });\r\n    }\r\n    tmprow.push(item);\r\n    let spec = genSpec(tmprow, tmpcol, tmpbody);\r\n    spec[\"description\"] = stringfySpec(spec);\r\n    specList.push(spec);\r\n    tmprow.splice(tmprow.length - 1, 1);\r\n    tmpbody.push(item);\r\n    let spec2 = genSpec(tmprow, tmpcol, tmpbody);\r\n    spec2[\"description\"] = stringfySpec(spec2);\r\n    specList.push(spec2);\r\n    let item_str = calString(refineStrName(item));\r\n    specListWithAdd.push({\r\n      \"add\": item_str,\r\n      \"list\": specList\r\n    });\r\n  });\r\n  // console.log(specListWithAdd);\r\n  return specListWithAdd;\r\n  // this.storeSuggestion(specListWithAdd);\r\n}\r\n\r\nconst deleteUsedSpec = (unusedSpec, header) => {\r\n  if(!header) return;\r\n  header.forEach((item) => {\r\n    if (refineStrName(item).operator == \"attr\") {\r\n      for (let j = 0; j < unusedSpec.length; j++) {\r\n        let spec = unusedSpec[j];\r\n        if (\r\n          refineStrName(item).data == spec.data &&\r\n          refineStrName(item).attribute == spec.attribute\r\n        ) {\r\n          unusedSpec.splice(j, 1);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nconst mapTable = (table, rowInfo, colInfo) => {\r\n  // console.log(rowInfo, colInfo);\r\n  // console.log(this.currentActiveGrid.row, this.currentActiveGrid.column);\r\n  let rowSize = table.length;\r\n  let columnSize = 0;\r\n  for (let i = 0; i < rowSize; i++) {\r\n    if (columnSize < table[i].length) {\r\n      columnSize = table[i].length;\r\n    }\r\n  }\r\n  let newRowSize = rowInfo.row - colInfo.len + rowSize;\r\n  let newColumnSize = colInfo.column - rowInfo.len + columnSize;\r\n  let newTable = [];\r\n  for (let i = 0; i < newRowSize; i++) {\r\n    let tmp = [];\r\n    for (let j = 0; j < newColumnSize; j++) {\r\n      tmp.push(null);\r\n    }\r\n    newTable.push(tmp);\r\n  }\r\n  // console.log(rowSize, columnSize, newRowSize, newColumnSize);\r\n  let oldx = colInfo.len ? colInfo.len : 1, oldy = rowInfo.len ? rowInfo.len : 1;\r\n  let dx = rowInfo.row - oldx,\r\n    dy = rowInfo.column;\r\n  for (let i = oldx; i < rowSize; i++) {\r\n    for (let j = 0; j < oldy; j++) {\r\n      newTable[i + dx][j + dy] = table[i][j];\r\n    }\r\n  }\r\n  dx = colInfo.row;\r\n  dy = colInfo.column - oldy;\r\n  for (let i = 0; i < oldx; i++) {\r\n    for (let j = oldy; j < columnSize; j++) {\r\n      newTable[i + dx][j + dy] = table[i][j];\r\n    }\r\n  }\r\n  dx = rowInfo.row - oldx;\r\n  dy = colInfo.column - oldy;\r\n  for (let i = oldx; i < rowSize; i++) {\r\n    for (let j = oldy; j < columnSize; j++) {\r\n      newTable[i + dx][j + dy] = table[i][j];\r\n    }\r\n  }\r\n  return newTable;\r\n}\r\n\r\nexport default {\r\n  generateSuggestions, genRandomColor, unique, checkValidSpec, stringfySpec, isCategorical, specObj2List, refineStrName, calString,\r\n  genAlterSpec, genSpec, genExploreSpec, deleteUsedSpec, mapTable\r\n};\r\n","export const EXAMPLE_DATA = [\r\n  {\r\n    id: \"crime\",\r\n    name: \"US Crime Rate By State (2004--2008)\",\r\n    value: {\r\n      \"name\": \"crime\",\r\n      \"values\": [\r\n        { \"state\": \"Alabama\", \"year\": 2004, \"crime\": 4029.3 },\r\n        { \"state\": \"Alabama\", \"year\": 2005, \"crime\": 3900 },\r\n        { \"state\": \"Alaska\", \"crime\": 3370.9, \"year\": 2004 },\r\n        { \"state\": \"Alaska\", \"crime\": 3615, \"year\": 2005 }\r\n      ]\r\n    }\r\n    // url: \"http://localhost:5000/dataset/crime\",\r\n  },\r\n  {\r\n    id: \"gdp\",\r\n    name: \"US GDP By State (2004--2008)\",\r\n    value: {\r\n      \"name\": \"gdp\",\r\n      \"values\": [\r\n        { \"state\": \"Alabama\", \"year\": 2005, \"gdp\": 100 },\r\n        { \"state\": \"Alabama\", \"year\": 2006, \"gdp\": 120 },\r\n        { \"state\": \"Alaska\", \"year\": 2005, \"gdp\": 50 },\r\n        { \"state\": \"Alaska\", \"year\": 2006, \"gdp\": 55 }\r\n      ]\r\n    }\r\n  }\r\n];\r\n\r\n// export const EXAMPLE_DATA = [\r\n//   {\r\n//     id: \"crime\",\r\n//     name: \"US Crime Rate By State (2004--2008)\",\r\n//     url: \"http://localhost:5000/dataset/crime\",\r\n//   },\r\n// ];\r\n\r\n// export const EXTRACT_URL = \"http://localhost:5000/extract\";\r\n","<template>\r\n  <div class=\"header-view\">\r\n    <div id=\"rigel-title\">Rigel</div>\r\n    <div id=\"dataset-toolbar\">\r\n      <div class=\"header-title\">Datasets:</div>\r\n      <div id=\"dataset-select\">\r\n        <a-select\r\n          placeholder=\"Select Example Data\"\r\n          style=\"width: 100%\"\r\n          :allowClear=\"true\"\r\n          @change=\"handleChange\"\r\n        >\r\n          <a-select-option\r\n            v-for=\"data in EXAMPLE_DATA\"\r\n            :key=\"data.id\"\r\n            :value=\"JSON.stringify(data)\"\r\n          >\r\n            {{ data.id }}\r\n          </a-select-option>\r\n        </a-select>\r\n      </div>\r\n      <a-button\r\n        class=\"header-button\"\r\n        style=\"width: 62px\"\r\n        @click=\"importDataset\"\r\n        id=\"chooseFile\"\r\n        >Import</a-button\r\n      >\r\n      <a-button\r\n        class=\"header-button\"\r\n        style=\"width: 95px\"\r\n        @click=\"importNewData\"\r\n        id=\"chooseFile\"\r\n        >Import New</a-button\r\n      >\r\n    </div>\r\n    <div id=\"undo-redo-toolbar\">\r\n      <a-button class=\"header-button\" style=\"width: 62px\">Undo</a-button>\r\n      <a-button class=\"header-button\" style=\"width: 62px\">Redo</a-button>\r\n    </div>\r\n    <div id=\"associate-toolbar\">\r\n      <div class=\"header-title\">Associate:</div>\r\n      <a-radio-group v-model=\"value\" @change=\"onChangeMode\" default-value=\"union\" >\r\n        <a-radio-button class=\"header-button\" style=\"width: 125px\" value=\"union\"\r\n          >Union(Outer Join)</a-radio-button\r\n        >\r\n        <a-radio-button class=\"header-button\" style=\"width: 160px\" value=\"intersect\"\r\n          >Intersection(Inner Join)</a-radio-button\r\n        >\r\n      </a-radio-group>\r\n    </div>\r\n    <!-- <div id=\"manipulate-toolbar\">\r\n      <a-button class=\"header-button\" style=\"width: 100px\">Manipulate</a-button>\r\n    </div> -->\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapActions } from \"vuex\";\r\nimport Utils from \"@/utils.js\";\r\nimport { EXAMPLE_DATA } from \"@/CONSTANT\";\r\nexport default {\r\n  name: \"HeaderView\",\r\n  data() {\r\n    return {\r\n      selectedValue: null,\r\n      value: \"union\"\r\n    };\r\n  },\r\n  computed: {\r\n    EXAMPLE_DATA() {\r\n      return EXAMPLE_DATA;\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions([\"storeRelation\", \"storeAttrInfo\", \"storeRawRelation\", \"storeAssociationRule\"]),\r\n    onChangeMode(){\r\n      // console.log(this.value);\r\n      this.storeAssociationRule(this.value);\r\n    },\r\n    handleChange(value) {\r\n      if(!value || value === \"\"){\r\n        Object.assign(this, {\r\n          selectedValue: null\r\n        });\r\n        return;\r\n      }\r\n      let res = JSON.parse(value);\r\n      // console.log(res);\r\n      Object.assign(this, {\r\n        selectedValue: res\r\n      })\r\n    },\r\n    async importDataset() {\r\n      if(!this.selectedValue) {\r\n        this.$message.error(\"Please select a dataset\");\r\n        return;\r\n      }\r\n      try{\r\n        // console.log(this.selectedValue.value);\r\n        this.importData(JSON.stringify(this.selectedValue.value));\r\n      } catch(e) {\r\n        console.log(e);\r\n        this.$message.error(\"Unsupported File Type\");\r\n      }\r\n    },\r\n    async selectData() {\r\n      return new Promise((resolve, reject) => {\r\n        let input = document.createElement(\"input\");\r\n        input.value = \"select file\";\r\n        input.type = \"file\";\r\n        input.onchange = (event) => {\r\n          let file = event.target.files[0];\r\n          let file_reader = new FileReader();\r\n          file_reader.onload = () => {\r\n            let fc = file_reader.result;\r\n            resolve(fc); // 返回文件文本内容到Promise\r\n          };\r\n          file_reader.readAsText(file, \"UTF-8\");\r\n        };\r\n        input.click();\r\n      });\r\n    },\r\n    async importNewData() {\r\n      let rawData = await this.selectData();\r\n      this.importData(rawData);\r\n    },\r\n    async importData(rawData) {\r\n      // let rawData = await this.selectData();\r\n      console.log(rawData);\r\n      try {\r\n        let jsonData = JSON.parse(rawData);\r\n        console.log(jsonData);\r\n        // 这里留个坑，先只做一次导入一张表，多张表的情况后面迭代吧\r\n        let keys = Object.keys(jsonData.values[0]);\r\n        let relation = [];\r\n        jsonData.values.forEach((item) => {\r\n          let newItem = [];\r\n          keys.forEach((key) => {\r\n            newItem.push({\r\n              value: item[key],\r\n              source: {\r\n                operator: \"attr\",\r\n                data: jsonData.name,\r\n                attribute: key,\r\n              },\r\n            });\r\n          });\r\n          relation.push(newItem);\r\n        });\r\n        let colorList = Utils.genRandomColor(keys.length);\r\n        console.log(\"color\", colorList);\r\n        let res = {\r\n          name: jsonData.name,\r\n          entityOrder: keys,\r\n          relation: relation,\r\n          color: colorList,\r\n        };\r\n        console.log(\"res: \", res);\r\n        this.storeRelation(res);\r\n        let attrInfo = [];\r\n        keys.forEach((key, index) => {\r\n          let valueList = [];\r\n          jsonData.values.forEach((item) => {\r\n            valueList.push(item[key]);\r\n          });\r\n          attrInfo.push({\r\n            data: jsonData.name,\r\n            attribute: key,\r\n            strName: { operator: \"attr\", data: jsonData.name, attribute: key },\r\n            color: colorList[index],\r\n            valueList: Utils.unique(valueList),\r\n          });\r\n        });\r\n        console.log(\"attrInfo:\", attrInfo);\r\n        this.storeAttrInfo(attrInfo);\r\n        this.storeRawRelation(jsonData);\r\n      } catch (e) {\r\n        console.log(e);\r\n        this.$message.error(\"Unsupported File Type\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.header-view {\r\n  height: 100%;\r\n  margin-top: 10px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n#rigel-title {\r\n  display: inline-block;\r\n  margin-left: 42px;\r\n  width: 37px;\r\n  color: rgba(16, 16, 16, 100);\r\n  font-size: 16px;\r\n  font-family: SourceHanSansSC-regular;\r\n}\r\n\r\n#dataset-toolbar {\r\n  display: inline-block;\r\n  margin-left: 126px;\r\n  width: 490px;\r\n}\r\n\r\n#dataset-select {\r\n  display: inline-block;\r\n  margin-left: 15px;\r\n  width: 200px;\r\n}\r\n\r\n.header-button {\r\n  display: inline-block;\r\n  margin-left: 10px;\r\n  text-align: center;\r\n  padding: 0;\r\n}\r\n\r\n.header-title {\r\n  display: inline-block;\r\n  color: rgba(16, 16, 16, 100);\r\n  font-size: 16px;\r\n  text-align: left;\r\n  font-family: SourceHanSansSC-regular;\r\n}\r\n\r\n#undo-redo-toolbar {\r\n  display: inline-block;\r\n  margin-left: 150px;\r\n  width: 150px;\r\n}\r\n\r\n#associate-toolbar {\r\n  display: inline-block;\r\n  margin-left: 180px;\r\n  width: 400px;\r\n}\r\n\r\n#manipulate-toolbar {\r\n  display: inline-block;\r\n  float: right;\r\n  margin-right: 30px;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HeaderView.vue?vue&type=template&id=1e227586&scoped=true&\"\nimport script from \"./HeaderView.vue?vue&type=script&lang=js&\"\nexport * from \"./HeaderView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HeaderView.vue?vue&type=style&index=0&id=1e227586&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1e227586\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"view relation-view\"},[_c('div',{staticClass:\"view-title\"},[_vm._v(\"Raw Tables\")]),_c('div',{staticClass:\"relations-container\"},[(_vm.relations.length == 0)?_c('spreadsheet'):_c('a-tabs',{attrs:{\"type\":\"editable-card\",\"hideAdd\":true},on:{\"edit\":_vm.onTabEdit,\"change\":_vm.onTabChange}},_vm._l((_vm.relations),function(relation,index){return _c('a-tab-pane',{key:index,attrs:{\"tab\":relation.name}},[_c('div',{staticClass:\"spreadsheet-container\"},[_c('spreadsheet',{attrs:{\"name\":relation.name,\"head\":relation.entityOrder,\"table\":relation.relation,\"headColor\":relation.color,\"editable\":false}})],1)])}),1)],1),(_vm.attrInfo && _vm.attrInfo.length > 0)?_c('div',{staticClass:\"attrInfo-container\"},_vm._l((_vm.attrInfo),function(attr,index){return _c('div',{key:((attr.data) + \"_\" + (attr.attribute) + \"_\" + index),staticClass:\"attrInfo-box\",attrs:{\"id\":(\"attr_\" + (JSON.stringify(attr))),\"data-info\":JSON.stringify(attr),\"draggable\":true},on:{\"dragstart\":_vm.attrDragHandler,\"drop\":_vm.attrDropHandler,\"dragover\":_vm.attrAllowDrop,\"contextmenu\":function($event){$event.preventDefault();return _vm.openMenu($event, attr)}}},[_c('div',{staticClass:\"attrInfo-block\",style:({ 'background-color': attr.color })}),_c('div',{staticClass:\"attrInfo-text\"},[_vm._v(\" \"+_vm._s(attr.data ? ((attr.data) + \".\" + (attr.attribute)) : (\"\" + (attr.attribute)))+\" \")])])}),0):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"contextmenu\",style:({ left: _vm.left + 'px', top: _vm.top + 'px' }),attrs:{\"id\":\"menu\"}},[_c('div',[_c('div',{staticClass:\"menutext\"},[_vm._v(\"Sorting\")]),_c('a-switch',{staticClass:\"menuswitch\",attrs:{\"size\":\"small\"},model:{value:(_vm.menuSortEnable),callback:function ($$v) {_vm.menuSortEnable=$$v},expression:\"menuSortEnable\"}})],1),(_vm.menuSortEnable)?_c('div',[_c('a-radio-group',{model:{value:(_vm.menuSort),callback:function ($$v) {_vm.menuSort=$$v},expression:\"menuSort\"}},[_c('a-radio',{attrs:{\"value\":1}},[_vm._v(\" Ascending \")]),_c('br'),_c('a-radio',{attrs:{\"value\":2}},[_vm._v(\" Descending \")])],1)],1):_vm._e(),_c('div',{staticClass:\"dashline\"}),_c('div',[_c('div',{staticClass:\"menutext\"},[_vm._v(\"Filtering\")]),_c('a-switch',{staticClass:\"menuswitch\",attrs:{\"size\":\"small\"},model:{value:(_vm.menuFilterEnable),callback:function ($$v) {_vm.menuFilterEnable=$$v},expression:\"menuFilterEnable\"}})],1),(\n        _vm.menuFilterEnable &&\n        this.rightClickItem &&\n        this.rightClickItemIsCategorical\n      )?_c('div',[_c('a-checkbox-group',{attrs:{\"name\":\"checkboxgroup\",\"options\":this.rightClickItem.valueList},on:{\"change\":_vm.onFilterCheckboxChange},model:{value:(_vm.menuFilterValue),callback:function ($$v) {_vm.menuFilterValue=$$v},expression:\"menuFilterValue\"}})],1):_vm._e(),(\n        _vm.menuFilterEnable &&\n        this.rightClickItem &&\n        !this.rightClickItemIsCategorical\n      )?_c('div',[_c('a-input-number',{staticClass:\"menuInputNumber\",model:{value:(_vm.menuFilterLowerBound),callback:function ($$v) {_vm.menuFilterLowerBound=$$v},expression:\"menuFilterLowerBound\"}}),_c('div',{staticClass:\"menuInputNumberLine\"}),_c('a-input-number',{staticClass:\"menuInputNumber\",model:{value:(_vm.menuFilterUpperBound),callback:function ($$v) {_vm.menuFilterUpperBound=$$v},expression:\"menuFilterUpperBound\"}})],1):_vm._e(),_c('div',{staticClass:\"dashline\"}),(this.rightClickItem && !this.rightClickItemIsCategorical)?_c('div',[_c('div',[_c('div',{staticClass:\"menutext\"},[_vm._v(\"Binning\")]),_c('a-switch',{staticClass:\"menuswitch\",attrs:{\"size\":\"small\"},model:{value:(_vm.menuBinEnable),callback:function ($$v) {_vm.menuBinEnable=$$v},expression:\"menuBinEnable\"}})],1),(_vm.menuBinEnable)?_c('div',[_c('a-input-number',{staticClass:\"menuInputNumber\",model:{value:(_vm.menuBinLowerBound),callback:function ($$v) {_vm.menuBinLowerBound=$$v},expression:\"menuBinLowerBound\"}}),_c('div',{staticClass:\"menuInputNumberLine\"}),_c('a-input-number',{staticClass:\"menuInputNumber\",model:{value:(_vm.menuBinUpperBound),callback:function ($$v) {_vm.menuBinUpperBound=$$v},expression:\"menuBinUpperBound\"}}),_c('div',[_c('div',{staticClass:\"menutext\"},[_vm._v(\"Step:\")]),_c('a-input-number',{staticClass:\"menuInputNumber\",attrs:{\"min\":1},model:{value:(_vm.menuBinStep),callback:function ($$v) {_vm.menuBinStep=$$v},expression:\"menuBinStep\"}})],1)],1):_vm._e(),_c('div',{staticClass:\"dashline\"})]):_vm._e(),_c('div',{staticClass:\"menuButtonContainer\"},[_c('a-button',{staticClass:\"menubutton\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onMenuApply}},[_vm._v(\" Apply \")]),_c('a-button',{staticClass:\"menubutton\",on:{\"click\":_vm.onMenuReset}},[_vm._v(\" Reset \")])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"spreadsheet\"},[(_vm.head)?_c('div',{staticClass:\"row\"},_vm._l((_vm.head),function(cellValue,i){return _c('div',{key:(_vm.name + \"_head_\" + i),staticClass:\"cell-container head-container\"},[_c('cell',{attrs:{\"value\":cellValue,\"editable\":false,\"draggable\":false,\"cellColor\":_vm.headColor[i]}})],1)}),0):_vm._e(),_vm._l((this.Table),function(row,i){return _c('div',{key:(_vm.name + \"_row_\" + i),staticClass:\"row\"},_vm._l((row),function(cellValue,j){return _c('div',{key:(_vm.name + \"_cell_\" + i + \"_\" + j),staticClass:\"cell-container\",class:{\n        leftHightlightedCell: _vm.checkLeftHightlighted(i, j),\n        topHightlightedCell: _vm.checkTopHightlighted(i, j),\n      }},[_c('cell',{attrs:{\"value\":cellValue,\"editable\":_vm.editable},on:{\"cell-change\":function($event){return _vm.cellChangeHandler(i, j, $event)},\"left-drop\":function($event){return _vm.leftDropHandler(i, j, $event)},\"top-drop\":function($event){return _vm.topDropHandler(i, j, $event)},\"left-hover\":function($event){return _vm.leftHoverHandler(i, j, $event)},\"top-hover\":function($event){return _vm.topHoverHandler(i, j, $event)},\"drag-leave\":function($event){return _vm.dragLeaveHandler()}}})],1)}),0)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cell\",style:({ 'background-color': _vm.cellColor }),attrs:{\"title\":this.realValue,\"contenteditable\":_vm.editable,\"draggable\":_vm.draggable,\"data-info\":JSON.stringify(this.cellValue)},on:{\"dragstart\":_vm.dragHandler,\"drop\":_vm.dropHandler,\"dragover\":_vm.allowDrop,\"dragleave\":_vm.dragLeaveHandler,\"blur\":_vm.inputHandler}},[_vm._v(\" \"+_vm._s(this.realValue)+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div\r\n    class=\"cell\"\r\n    :title=\"this.realValue\"\r\n    :contenteditable=\"editable\"\r\n    :draggable=\"draggable\"\r\n    :data-info=\"JSON.stringify(this.cellValue)\"\r\n    @dragstart=\"dragHandler\"\r\n    @drop=\"dropHandler\"\r\n    @dragover=\"allowDrop\"\r\n    @dragleave=\"dragLeaveHandler\"\r\n    @blur=\"inputHandler\"\r\n    :style=\"{ 'background-color': cellColor }\"\r\n  >\r\n    {{\r\n      this.realValue\r\n    }}\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions } from \"vuex\";\r\nexport default {\r\n  name: \"SpreadsheetCell\",\r\n  props: {\r\n    value: [String, Object],\r\n    editable: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    draggable: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    cellColor: {\r\n      type: String,\r\n      default: \"white\",\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      cellValue: \"\",\r\n      realValue: \"\",\r\n    };\r\n  },\r\n  created() {\r\n    this.cellValue = this.value;\r\n    let tmp = this.cellValue;\r\n    if (tmp) {\r\n      if (tmp.value) {\r\n        if (!tmp.value.lower) {\r\n          this.realValue = String(tmp.value);\r\n        } else if (tmp.value.isRightOpen == true) {\r\n          this.realValue = `[${tmp.value.lower}, ${tmp.value.upper})`;\r\n        } else {\r\n          this.realValue = `[${tmp.value.lower}, ${tmp.value.upper}]`;\r\n        }\r\n      } else {\r\n        this.realValue = String(tmp);\r\n      }\r\n    } else {\r\n      this.realValue = \"\";\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\"setDragSource\"]),\r\n    dragHandler(event) {\r\n      // event.dataTransfer.setData(\"dragValue\", event.target.innerText);\r\n      event.dataTransfer.setData(\"info\", event.target.dataset.info);\r\n      event.dataTransfer.setData(\"type\", \"cell\");\r\n      sessionStorage.setItem(\"type\", \"cell\");\r\n      this.setDragSource(true);\r\n      this.$emit(\"drag-start\");\r\n    },\r\n\r\n    allowDrop(event) {\r\n      if (\r\n        sessionStorage.getItem(\"type\") != \"cell\" &&\r\n        sessionStorage.getItem(\"type\") != \"attr\"\r\n      ) {\r\n        return;\r\n      }\r\n      if (this.editable) {\r\n        event.preventDefault();\r\n        if (event.offsetY > 5) {\r\n          //左边沿\r\n          this.$emit(\"left-hover\");\r\n        } else {\r\n          //上边沿\r\n          this.$emit(\"top-hover\");\r\n        }\r\n      }\r\n    },\r\n\r\n    dropHandler(event) {\r\n      if (\r\n        sessionStorage.getItem(\"type\") != \"cell\" &&\r\n        sessionStorage.getItem(\"type\") != \"attr\"\r\n      ) {\r\n        return;\r\n      }\r\n      if (this.editable) {\r\n        event.preventDefault();\r\n        if (event.dataTransfer.getData(\"type\") === \"cell\") {\r\n          let info = {\r\n            value: event.dataTransfer.getData(\"info\"),\r\n            isDrag: true,\r\n          };\r\n          this.$emit(\"cell-change\", info);\r\n          this.$emit(\"drag-leave\");\r\n        } else {\r\n          console.log(\"attr!\");\r\n          console.log(event.offsetX, event.offsetY);\r\n          let attr = JSON.parse(event.dataTransfer.getData(\"info\"));\r\n          if (event.offsetY > 5) {\r\n            //左边沿\r\n            this.$emit(\"left-drop\", attr);\r\n          } else {\r\n            //上边沿\r\n            this.$emit(\"top-drop\", attr);\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    inputHandler(event) {\r\n      console.log(\"input\");\r\n      let info = {\r\n        value: event.target.innerText,\r\n        isDrag: false,\r\n      };\r\n      this.$emit(\"cell-change\", info);\r\n    },\r\n\r\n    dragLeaveHandler(event) {\r\n      this.$emit(\"drag-leave\");\r\n    },\r\n\r\n    // setClass(leftHightlighted, topHightlighted) {\r\n    //   let cl = {cell: true};\r\n    //   if(leftHightlighted) cl['leftHightlightedCell'] = true;\r\n    //   if(topHightlighted) cl['topHightlightedCell'] = true;\r\n    //   return cl;\r\n    // }\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cell.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cell.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Cell.vue?vue&type=template&id=6962f70f&\"\nimport script from \"./Cell.vue?vue&type=script&lang=js&\"\nexport * from \"./Cell.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"spreadsheet\">\r\n    <!-- Head -->\r\n    <div class=\"row\" v-if=\"head\">\r\n      <div\r\n        class=\"cell-container head-container\"\r\n        v-for=\"(cellValue, i) in head\"\r\n        :key=\"`${name}_head_${i}`\"\r\n      >\r\n        <cell\r\n          :value=\"cellValue\"\r\n          :editable=\"false\"\r\n          :draggable=\"false\"\r\n          :cellColor=\"headColor[i]\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <!-- Content -->\r\n    <div class=\"row\" v-for=\"(row, i) in this.Table\" :key=\"`${name}_row_${i}`\">\r\n      <div\r\n        class=\"cell-container\"\r\n        v-for=\"(cellValue, j) in row\"\r\n        :key=\"`${name}_cell_${i}_${j}`\"\r\n        :class=\"{\r\n          leftHightlightedCell: checkLeftHightlighted(i, j),\r\n          topHightlightedCell: checkTopHightlighted(i, j),\r\n        }\"\r\n      >\r\n        <cell\r\n          :value=\"cellValue\"\r\n          :editable=\"editable\"\r\n          @cell-change=\"cellChangeHandler(i, j, $event)\"\r\n          @left-drop=\"leftDropHandler(i, j, $event)\"\r\n          @top-drop=\"topDropHandler(i, j, $event)\"\r\n          @left-hover=\"leftHoverHandler(i, j, $event)\"\r\n          @top-hover=\"topHoverHandler(i, j, $event)\"\r\n          @drag-leave=\"dragLeaveHandler()\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from \"vue\";\r\nimport Cell from \"./Cell.vue\";\r\nimport { mapState, mapMutations, mapActions } from \"vuex\";\r\nimport Utils from \"@/utils.js\";\r\n\r\nexport default {\r\n  name: \"Spreadsheet\",\r\n  props: {\r\n    table: Array,\r\n    head: Array,\r\n    headColor: Array,\r\n    name: {\r\n      type: String,\r\n      default: \"initTable\",\r\n    },\r\n    initRowNum: {\r\n      type: Number,\r\n      default: 10,\r\n    },\r\n    initColNum: {\r\n      type: Number,\r\n      default: 4,\r\n    },\r\n    editable: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      Table: [[]],\r\n      leftHightlightedRow: -1,\r\n      leftHightlightedColumn: -1,\r\n      topHightlightedRow: -1,\r\n      topHightlightedColumn: -1,\r\n      leftHovered: false,\r\n      topHovered: false,\r\n    };\r\n  },\r\n  created() {\r\n    this.initTable();\r\n  },\r\n  watch: {\r\n    Table(val) {\r\n      if(this.name == \"targetTable\") {\r\n        this.storeCurrentTable(val);\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState([\"dragSourceIsCell\", \"attrInfo\", \"row_header\", \"column_header\", \"currentActiveGrid\"]),\r\n  },\r\n  methods: {\r\n    ...mapActions([\"storeSuggestion\", \"storePartialSpecSuggestion\", \"storeCurrentTable\", \"storeCurrentActiveGrid\"]),\r\n    initTable() {\r\n      if (this.table) {\r\n        if (this.name !== \"targetTable\") {\r\n          this.Table = this.table;\r\n        } else {\r\n          // console.log(this.table);\r\n          let table = this.table;\r\n          let rowSize = table.length;\r\n          let columnSize = 0;\r\n          for (let i = 0; i < rowSize; i++) {\r\n            if (columnSize < table[i].length) {\r\n              columnSize = table[i].length;\r\n            }\r\n          }\r\n          // console.log(rowSize, columnSize);\r\n          for (let i = 0; i < rowSize; i++) {\r\n            for (let j = 0; j < this.initColNum - table[i].length; j++) {\r\n              table[i].push(null);\r\n            }\r\n          }\r\n          if (rowSize < this.initRowNum) {\r\n            for (let i = 0; i < this.initRowNum - rowSize; i++) {\r\n              table.push(\r\n                new Array(\r\n                  columnSize < this.initColNum ? this.initColNum : columnSize\r\n                )\r\n              );\r\n            }\r\n          }\r\n          this.Table = table;\r\n        }\r\n        // console.log(this.Table);\r\n      } else {\r\n        this.Table = new Array(this.initRowNum);\r\n        for (let i = 0; i < this.initRowNum; i++) {\r\n          this.Table[i] = new Array(this.initColNum);\r\n        }\r\n      }\r\n    },\r\n    cellChangeHandler(row, column, value) {\r\n      // this.Table[row][column] = value;\r\n      const newRow = this.Table[row].slice(0);\r\n      if (value.isDrag) {\r\n        newRow[column] = JSON.parse(value.value);\r\n        console.log(\"notice\", newRow[column]);\r\n      } else {\r\n        if (!value.value || value.value == \"\") {\r\n          newRow[column] = null;\r\n        } else {\r\n          newRow[column] = {\r\n            value: value.value,\r\n            source: undefined,\r\n          }; // 这里需要推荐匹配的attr\r\n        }\r\n      }\r\n      this.$set(this.Table, row, newRow);\r\n      console.log(row, column, value, this.Table);\r\n      // this.calSuggestion();\r\n\r\n      this.storeCurrentActiveGrid({\r\n        row,\r\n        column\r\n      });\r\n      let partialSpecSuggestion = this.disambiguateCell(\r\n        newRow[column].value,\r\n        newRow[column].source\r\n      );\r\n      if (partialSpecSuggestion) {\r\n        this.storePartialSpecSuggestion(partialSpecSuggestion);\r\n        console.log(partialSpecSuggestion);\r\n      }\r\n    },\r\n    leftDropHandler(row, column, value) {\r\n      this.leftHovered = this.topHovered = false;\r\n      console.log(row, column, value);\r\n      if (column + value.valueList.length <= this.Table[row].length) {\r\n        var newRow = new Array(this.Table[row].length);\r\n        for (let i = 0; i < newRow.length; i++) {\r\n          newRow[i] = this.Table[row][i];\r\n        }\r\n        for (let i = column; i < column + value.valueList.length; i++) {\r\n          newRow[i] = {\r\n            value: value.valueList[i - column],\r\n            source: value.strName,\r\n          };\r\n        }\r\n        this.$set(this.Table, row, newRow);\r\n      } else {\r\n        let delta = column + value.valueList.length - this.Table[0].length;\r\n        for (let i = 0; i < this.Table.length; i++) {\r\n          for (let j = 0; j < delta; j++) {\r\n            this.Table[i].push(null);\r\n          }\r\n        }\r\n        for (let i = column; i < column + value.valueList.length; i++) {\r\n          this.Table[row][i] = {\r\n            value: value.valueList[i - column],\r\n            source: value.strName,\r\n          };\r\n        }\r\n        this.$forceUpdate();\r\n      }\r\n      // this.calSuggestion();\r\n      this.currentActiveGrid = {\r\n        row,\r\n        column\r\n      };\r\n      let partialSpecSuggestion = this.disambiguateRow(value.valueList, value.strName, true);\r\n      if (partialSpecSuggestion) {\r\n        this.storePartialSpecSuggestion(partialSpecSuggestion);\r\n        console.log(partialSpecSuggestion);\r\n      }\r\n    },\r\n    topDropHandler(row, column, value) {\r\n      this.leftHovered = this.topHovered = false;\r\n      console.log(row, column, value);\r\n      if (row + value.valueList.length <= this.Table.length) {\r\n        for (let i = row; i < row + value.valueList.length; i++) {\r\n          this.Table[i][column] = {\r\n            value: value.valueList[i - row],\r\n            source: value.strName,\r\n          };\r\n        }\r\n        this.$forceUpdate();\r\n      } else {\r\n        let delta = row + value.valueList.length - this.Table.length;\r\n        for (let i = 0; i < delta; i++) {\r\n          this.Table.push(new Array(this.Table[0].length));\r\n        }\r\n        for (let i = row; i < row + value.valueList.length; i++) {\r\n          this.Table[i][column] = {\r\n            value: value.valueList[i - row],\r\n            source: value.strName,\r\n          };\r\n        }\r\n        this.$forceUpdate();\r\n      }\r\n      // this.calSuggestion();\r\n      this.currentActiveGrid = {\r\n        row,\r\n        column\r\n      };\r\n      let partialSpecSuggestion = this.disambiguateRow(value.valueList, value.strName, false);\r\n      if (partialSpecSuggestion) {\r\n        this.storePartialSpecSuggestion(partialSpecSuggestion);\r\n        console.log(partialSpecSuggestion);\r\n      }\r\n    },\r\n    leftHoverHandler(row, column, value) {\r\n      this.topHovered = false;\r\n      if (this.dragSourceIsCell) return;\r\n      this.leftHovered = true;\r\n      this.leftHightlightedRow = row;\r\n      this.leftHightlightedColumn = column;\r\n      console.log(row, column, value);\r\n    },\r\n    topHoverHandler(row, column, value) {\r\n      this.leftHovered = false;\r\n      if (this.dragSourceIsCell) return;\r\n      this.topHovered = true;\r\n      this.topHightlightedRow = row;\r\n      this.topHightlightedColumn = column;\r\n      console.log(row, column, value);\r\n    },\r\n    dragLeaveHandler() {\r\n      this.leftHovered = this.topHovered = false;\r\n    },\r\n    checkLeftHightlighted(row, col) {\r\n      return (\r\n        this.leftHovered &&\r\n        row == this.leftHightlightedRow &&\r\n        col == this.leftHightlightedColumn\r\n      );\r\n    },\r\n    checkTopHightlighted(row, col) {\r\n      return (\r\n        this.topHovered &&\r\n        row == this.topHightlightedRow &&\r\n        col == this.topHightlightedColumn\r\n      );\r\n    },\r\n\r\n    /* 推荐计算部分 */\r\n    searchValue(value) {\r\n      let res = [];\r\n      let attrInfo = this.attrInfo;\r\n      for (let i = 0; i < attrInfo.length; i++) {\r\n        let attr = attrInfo[i];\r\n        if (this.isinValueList(value, attr.valueList)) {\r\n          res.push({\r\n            operator: \"attr\",\r\n            data: attr.data,\r\n            attribute: attr.attribute,\r\n          });\r\n        }\r\n      }\r\n      return res;\r\n    },\r\n\r\n    // isinValueList(value, list) {\r\n    //   if (value.isRightOpen) {\r\n    //     for (let i = 0; i < list.length; i++) {\r\n    //       if (\r\n    //         list[i].isRightOpen == value.isRightOpen &&\r\n    //         list[i].lower == value.lower &&\r\n    //         list[i].upper == value.upper\r\n    //       )\r\n    //         return true;\r\n    //     }\r\n    //   } else {\r\n    //     for (let i = 0; i < list.length; i++) {\r\n    //       if (list[i] == value) return true;\r\n    //     }\r\n    //   }\r\n    //   return false;\r\n    // },\r\n\r\n    // matchValueToColumn() {\r\n    //   let table = this.Table;\r\n    //   for (var i = 0; i < table.length; i++) {\r\n    //     for (var j = 0; j < table[0].length; j++) {\r\n    //       if (\r\n    //         !table[i][j] ||\r\n    //         table[i][j].source ||\r\n    //         table[i][j].value == \"\" ||\r\n    //         !table[i][j].value\r\n    //       )\r\n    //         continue;\r\n    //       table[i][j].suggestedSource = this.searchValue(table[i][j].value);\r\n    //     }\r\n    //   }\r\n    // },\r\n\r\n    // dfsAttrOptions(okList, candidateList, tmpList, res, index) {\r\n    //   if (index == candidateList.length) {\r\n    //     let tmp = new Array();\r\n    //     for (let i in okList) tmp.push(i);\r\n    //     for (let i in tmpList) tmp.push(i);\r\n    //     res.push(tmp);\r\n    //     return;\r\n    //   }\r\n    //   for (let attr in candidateList[index]) {\r\n    //     tmpList.push(attr);\r\n    //     this.dfsAttrOptions(okList, candidateList, tmpList, res, index + 1);\r\n    //     tmpList.splice(-1, 1);\r\n    //   }\r\n    // },\r\n\r\n    // getAttrOptions() {\r\n    //   let table = this.Table;\r\n    //   let res = [];\r\n    //   let okList = [];\r\n    //   let candidateList = [];\r\n    //   for (var i = 0; i < table.length; i++) {\r\n    //     for (var j = 0; j < table[0].length; j++) {\r\n    //       if (!table[i][j]) continue;\r\n    //       if (table[i][j].source) {\r\n    //         if (\r\n    //           -1 ==\r\n    //           okList.findIndex((value) => {\r\n    //             return (\r\n    //               JSON.stringify(table[i][j].source) == JSON.stringify(value)\r\n    //             );\r\n    //           })\r\n    //         ) {\r\n    //           okList.push(table[i][j].source);\r\n    //         }\r\n    //       } else {\r\n    //         if (\r\n    //           -1 ==\r\n    //           candidateList.findIndex((value) => {\r\n    //             return (\r\n    //               JSON.stringify(table[i][j].suggestedSource) ==\r\n    //               JSON.stringify(value)\r\n    //             );\r\n    //           })\r\n    //         ) {\r\n    //           candidateList.push(table[i][j].suggestedSource);\r\n    //         }\r\n    //       }\r\n    //     }\r\n    //   }\r\n    //   if (candidateList.length == 0) {\r\n    //     return [okList];\r\n    //   }\r\n    //   this.dfsAttrOptions(okList, candidateList, [], res, 0);\r\n    //   return res;\r\n    // },\r\n\r\n    // dfsSpecOptions(\r\n    //   option,\r\n    //   rowHeaderList,\r\n    //   columnHeaderList,\r\n    //   bodyList,\r\n    //   specOptions,\r\n    //   index\r\n    // ) {\r\n    //   if (index == option.length) {\r\n    //     var item = new Object();\r\n    //     // row_header\r\n    //     if (rowHeaderList.length == 1) {\r\n    //       item[\"row_header\"] = rowHeaderList[0];\r\n    //     } else if (rowHeaderList.length > 1) {\r\n    //       let tmp = rowHeaderList[0];\r\n    //       for (let i = 1; i < rowHeaderList.length; i++) {\r\n    //         tmp = {\r\n    //           operator: \"cross\",\r\n    //           parameters: [tmp, rowHeaderList[i]],\r\n    //         };\r\n    //       }\r\n    //       item[\"row_header\"] = tmp;\r\n    //     }\r\n    //     // column_header\r\n    //     if (columnHeaderList.length == 1) {\r\n    //       item[\"column_header\"] = columnHeaderList[0];\r\n    //     } else if (columnHeaderList.length > 1) {\r\n    //       let tmp = columnHeaderList[0];\r\n    //       for (let i = 1; i < columnHeaderList.length; i++) {\r\n    //         tmp = {\r\n    //           operator: \"cross\",\r\n    //           parameters: [tmp, columnHeaderList[i]],\r\n    //         };\r\n    //       }\r\n    //       item[\"column_header\"] = tmp;\r\n    //     }\r\n    //     // body\r\n    //     if (bodyList.length == 1) {\r\n    //       item[\"body\"] = bodyList[0];\r\n    //     } else if (bodyList.length > 1) {\r\n    //       let tmp = bodyList[0];\r\n    //       for (let i = 1; i < bodyList.length; i++) {\r\n    //         tmp = {\r\n    //           operator: \"cross\",\r\n    //           parameters: [tmp, bodyList[i]],\r\n    //         };\r\n    //       }\r\n    //       item[\"body\"] = tmp;\r\n    //     }\r\n    //     if (Utils.checkValidSpec(item)) {\r\n    //       specOptions.push(item);\r\n    //     }\r\n    //     return;\r\n    //   }\r\n    //   let attr = option[index];\r\n    //   rowHeaderList.push(attr);\r\n    //   this.dfsSpecOptions(\r\n    //     option,\r\n    //     rowHeaderList,\r\n    //     columnHeaderList,\r\n    //     bodyList,\r\n    //     specOptions,\r\n    //     index + 1\r\n    //   );\r\n    //   rowHeaderList.splice(-1, 1);\r\n    //   console.log(\"assert\", rowHeaderList.length);\r\n    //   columnHeaderList.push(attr);\r\n    //   this.dfsSpecOptions(\r\n    //     option,\r\n    //     rowHeaderList,\r\n    //     columnHeaderList,\r\n    //     bodyList,\r\n    //     specOptions,\r\n    //     index + 1\r\n    //   );\r\n    //   columnHeaderList.splice(-1, 1);\r\n    //   bodyList.push(attr);\r\n    //   this.dfsSpecOptions(\r\n    //     option,\r\n    //     rowHeaderList,\r\n    //     columnHeaderList,\r\n    //     bodyList,\r\n    //     specOptions,\r\n    //     index + 1\r\n    //   );\r\n    //   bodyList.splice(-1, 1);\r\n    // },\r\n\r\n    // mapColumnToSpec() {\r\n    //   let attrOptions = this.getAttrOptions();\r\n    //   let specOptions = [];\r\n    //   attrOptions.forEach((option) => {\r\n    //     console.log(option);\r\n    //     this.dfsSpecOptions(option, [], [], [], specOptions, 0);\r\n    //   });\r\n    //   console.log(specOptions);\r\n    //   specOptions.forEach((option) => {\r\n    //     option[\"description\"] = Utils.stringfySpec(option);\r\n    //   });\r\n    //   // this.storeSuggestion(specOptions);\r\n    // },\r\n\r\n    // // 为当前表格计算推荐视图，在每次更新target table后调用\r\n    // calSuggestion() {\r\n    //   console.log(this.name);\r\n    //   if (this.name !== \"targetTable\") return;\r\n    //   this.matchValueToColumn();\r\n    //   this.mapColumnToSpec();\r\n    // },\r\n\r\n    // 对于用户进行的手动输入格子操作，进行排除歧义的操作\r\n    disambiguateCell(value, dragSource) {\r\n      let isHeaderExist = this.row_header.length > 0 || this.column_header.length > 0;\r\n      // console.log(value, dragSource);\r\n      if (dragSource) {\r\n        let sourceDescription = Utils.calString(dragSource);\r\n        let partialSpecList = [\r\n          {\r\n            row_header: dragSource,\r\n            description: `(${sourceDescription}), () => ()`,\r\n          },\r\n          {\r\n            column_header: dragSource,\r\n            description: `(), (${sourceDescription}) => ()`,\r\n          },\r\n        ];\r\n        if(isHeaderExist) {\r\n          partialSpecList.push({\r\n            body: dragSource,\r\n            description: `(), () => (${sourceDescription})`\r\n          });\r\n        }\r\n        return [\r\n          {\r\n            itemDescription: '\"' + value + '\"',\r\n            source: sourceDescription,\r\n            partialSpecList\r\n          },\r\n        ];\r\n      }\r\n      let source = this.searchValue(value);\r\n      let res = [];\r\n      if (source.length == 0) {\r\n        this.$message.error(\"Failed to find the source of the input\");\r\n        return;\r\n      }\r\n      for (let i = 0; i < source.length; i++) {\r\n        let key = source[i];\r\n        let tmp = {};\r\n        let sourceDescription = Utils.calString(key);\r\n        tmp[\"itemDescription\"] = '\"' + value + '\"';\r\n        tmp[\"source\"] = sourceDescription;\r\n        let partialSpecList = [\r\n          {\r\n            row_header: key,\r\n            description: `(${sourceDescription}), () => ()`,\r\n          },\r\n          {\r\n            column_header: key,\r\n            description: `(), (${sourceDescription}) => ()`,\r\n          },\r\n        ];\r\n        if(isHeaderExist) {\r\n          partialSpecList.push({\r\n            body: key,\r\n            description: `(), () => (${sourceDescription})`\r\n          });\r\n        }\r\n        tmp[\"partialSpecList\"] = partialSpecList;\r\n        res.push(tmp);\r\n      }\r\n      return res;\r\n    },\r\n    disambiguateRow(value, dragSource, isRow) {\r\n      // console.log(value, dragSource);\r\n      if(!value || value.length == 0) return;\r\n      let isHeaderExist = this.row_header.length > 0 || this.column_header.length > 0;\r\n      let itemDescription = `The ${isRow?\"row\":\"column\"} beginning with \"${value[0]}\"`;\r\n      let sourceDescription = Utils.calString(dragSource);\r\n      let partialSpecList = [];\r\n      if(isRow) {\r\n        partialSpecList.push({\r\n          column_header: dragSource, \r\n          description: `(), (${sourceDescription}) => ()`,\r\n        });\r\n      } else {\r\n        partialSpecList.push({\r\n          row_header: dragSource,\r\n          description: `(${sourceDescription}), () => ()`,\r\n        })\r\n      }\r\n      if(isHeaderExist) {\r\n        partialSpecList.push({\r\n          body: dragSource,\r\n          description: `(), () => (${sourceDescription})`\r\n        });\r\n      }\r\n      return [{\r\n        itemDescription,\r\n        source: sourceDescription,\r\n        partialSpecList\r\n      }]\r\n    } \r\n  },\r\n  components: {\r\n    Cell,\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.spreadsheet {\r\n  text-align: left;\r\n}\r\n\r\n.row {\r\n  width: 100%;\r\n  height: 32px;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.row:first-child {\r\n  height: 32.5px;\r\n}\r\n\r\n.row:last-child {\r\n  height: 32.5px;\r\n}\r\n\r\n.head-container .cell {\r\n  text-align: center;\r\n}\r\n\r\n.cell-container {\r\n  flex: 1 1;\r\n  padding: 0 5px;\r\n  border: 1px solid #bbb;\r\n  font: 100 16px/20px Times;\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n  position: relative;\r\n}\r\n\r\n.cell-container .cell {\r\n  width: calc(100% - 10px);\r\n  min-height: 20px;\r\n  position: absolute;\r\n  top: 50%;\r\n  transform: translate(0, -50%);\r\n}\r\n\r\n.leftHightlightedCell {\r\n  border-left-color: red;\r\n  border-left-width: 3px;\r\n}\r\n\r\n.topHightlightedCell {\r\n  border-top-color: red;\r\n  border-top-width: 3px;\r\n}\r\n\r\n.cell-container::-webkit-scrollbar {\r\n  display: none; /* Chrome Safari */\r\n}\r\n\r\n/* .row:first-child .cell-container {\r\n  border-top: 1.5px solid ;\r\n}\r\n\r\n.row .cell-container:first-child {\r\n  border-left: 1.5px solid;\r\n}\r\n\r\n.row .cell-container:last-child {\r\n  border-right: 1.5px solid ;\r\n}\r\n\r\n.row:last-child .cell-container {\r\n  border-bottom: 1.5px solid ;\r\n} */\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=596a2a88&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"view relation-view\">\r\n    <div class=\"view-title\">Raw Tables</div>\r\n    <div class=\"relations-container\">\r\n      <spreadsheet v-if=\"relations.length == 0\"></spreadsheet>\r\n      <a-tabs\r\n        v-else\r\n        type=\"editable-card\"\r\n        @edit=\"onTabEdit\"\r\n        @change=\"onTabChange\"\r\n        :hideAdd=\"true\"\r\n      >\r\n        <a-tab-pane\r\n          v-for=\"(relation, index) in relations\"\r\n          :key=\"index\"\r\n          :tab=\"relation.name\"\r\n        >\r\n          <div class=\"spreadsheet-container\">\r\n            <spreadsheet\r\n              :name=\"relation.name\"\r\n              :head=\"relation.entityOrder\"\r\n              :table=\"relation.relation\"\r\n              :headColor=\"relation.color\"\r\n              :editable=\"false\"\r\n            ></spreadsheet>\r\n          </div>\r\n        </a-tab-pane>\r\n      </a-tabs>\r\n    </div>\r\n    <div class=\"attrInfo-container\" v-if=\"attrInfo && attrInfo.length > 0\">\r\n      <div\r\n        class=\"attrInfo-box\"\r\n        v-for=\"(attr, index) in attrInfo\"\r\n        :key=\"`${attr.data}_${attr.attribute}_${index}`\"\r\n        :id=\"`attr_${JSON.stringify(attr)}`\"\r\n        :data-info=\"JSON.stringify(attr)\"\r\n        :draggable=\"true\"\r\n        @dragstart=\"attrDragHandler\"\r\n        @drop=\"attrDropHandler\"\r\n        @dragover=\"attrAllowDrop\"\r\n        @contextmenu.prevent=\"openMenu($event, attr)\"\r\n      >\r\n        <div\r\n          class=\"attrInfo-block\"\r\n          :style=\"{ 'background-color': attr.color }\"\r\n        ></div>\r\n        <div class=\"attrInfo-text\">\r\n          {{\r\n            attr.data ? `${attr.data}.${attr.attribute}` : `${attr.attribute}`\r\n          }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- contextMenu -->\r\n    <div\r\n      v-show=\"visible\"\r\n      :style=\"{ left: left + 'px', top: top + 'px' }\"\r\n      class=\"contextmenu\"\r\n      id=\"menu\"\r\n    >\r\n      <div>\r\n        <div class=\"menutext\">Sorting</div>\r\n        <a-switch class=\"menuswitch\" size=\"small\" v-model=\"menuSortEnable\" />\r\n      </div>\r\n      <div v-if=\"menuSortEnable\">\r\n        <a-radio-group v-model=\"menuSort\">\r\n          <a-radio :value=\"1\"> Ascending </a-radio>\r\n          <br />\r\n          <a-radio :value=\"2\"> Descending </a-radio>\r\n        </a-radio-group>\r\n      </div>\r\n\r\n      <div class=\"dashline\"></div>\r\n\r\n      <div>\r\n        <div class=\"menutext\">Filtering</div>\r\n        <a-switch class=\"menuswitch\" size=\"small\" v-model=\"menuFilterEnable\" />\r\n      </div>\r\n      <!-- Categorical -->\r\n      <div\r\n        v-if=\"\r\n          menuFilterEnable &&\r\n          this.rightClickItem &&\r\n          this.rightClickItemIsCategorical\r\n        \"\r\n      >\r\n        <a-checkbox-group\r\n          v-model=\"menuFilterValue\"\r\n          name=\"checkboxgroup\"\r\n          :options=\"this.rightClickItem.valueList\"\r\n          @change=\"onFilterCheckboxChange\"\r\n        />\r\n      </div>\r\n      <!-- Quantitative -->\r\n      <div\r\n        v-if=\"\r\n          menuFilterEnable &&\r\n          this.rightClickItem &&\r\n          !this.rightClickItemIsCategorical\r\n        \"\r\n      >\r\n        <a-input-number\r\n          class=\"menuInputNumber\"\r\n          v-model=\"menuFilterLowerBound\"\r\n        />\r\n        <div class=\"menuInputNumberLine\" />\r\n        <a-input-number\r\n          class=\"menuInputNumber\"\r\n          v-model=\"menuFilterUpperBound\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"dashline\"></div>\r\n\r\n      <!-- Quantitative Only -->\r\n      <div v-if=\"this.rightClickItem && !this.rightClickItemIsCategorical\">\r\n        <div>\r\n          <div class=\"menutext\">Binning</div>\r\n          <a-switch class=\"menuswitch\" size=\"small\" v-model=\"menuBinEnable\" />\r\n        </div>\r\n        <div v-if=\"menuBinEnable\">\r\n          <a-input-number class=\"menuInputNumber\" v-model=\"menuBinLowerBound\" />\r\n          <div class=\"menuInputNumberLine\" />\r\n          <a-input-number class=\"menuInputNumber\" v-model=\"menuBinUpperBound\" />\r\n          <div>\r\n            <div class=\"menutext\">Step:</div>\r\n            <a-input-number\r\n              class=\"menuInputNumber\"\r\n              :min=\"1\"\r\n              v-model=\"menuBinStep\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"dashline\"></div>\r\n      </div>\r\n\r\n      <div class=\"menuButtonContainer\">\r\n        <a-button type=\"primary\" class=\"menubutton\" @click=\"onMenuApply\">\r\n          Apply\r\n        </a-button>\r\n        <a-button class=\"menubutton\" @click=\"onMenuReset\"> Reset </a-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapMutations, mapActions } from \"vuex\";\r\nimport Spreadsheet from \"./Spreadsheet/Index.vue\";\r\nimport Utils from \"@/utils.js\";\r\n\r\nexport default {\r\n  name: \"RelationView\",\r\n  data() {\r\n    return {\r\n      rightClickItem: {},\r\n      rightClickItemIsCategorical: true,\r\n      visible: false,\r\n      top: 0,\r\n      left: 0,\r\n      menuSortEnable: true,\r\n      menuSort: 1,\r\n      menuFilterEnable: true,\r\n      menuFilterValue: [],\r\n      menuFilterUpperBound: null,\r\n      menuFilterLowerBound: null,\r\n      menuBinEnable: true,\r\n      menuBinUpperBound: null,\r\n      menuBinLowerBound: null,\r\n      menuBinStep: 5,\r\n    };\r\n  },\r\n  computed: mapState({\r\n    relations: (state) => state.relations,\r\n    attrInfo: (state) => state.attrInfo,\r\n    associationRule: (state) => state.associationRule,\r\n  }),\r\n  watch: {\r\n    visible(value) {\r\n      if (value) {\r\n        document.body.addEventListener(\"click\", this.closeMenu);\r\n      } else {\r\n        document.body.removeEventListener(\"click\", this.closeMenu);\r\n      }\r\n    },\r\n    menuSortEnable(value) {\r\n      if (value) {\r\n        this.menuFilterEnable = this.menuBinEnable = false;\r\n      }\r\n    },\r\n    menuFilterEnable(value) {\r\n      if (value) {\r\n        this.menuSortEnable = this.menuBinEnable = false;\r\n      }\r\n    },\r\n    menuBinEnable(value) {\r\n      if (value) {\r\n        this.menuSortEnable = this.menuFilterEnable = false;\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapMutations([\"changeActivatedRelationIndex\", \"removeRelationByIndex\"]),\r\n    ...mapActions([\"storeAttrInfo\", \"setDragSource\"]),\r\n    onTabChange(targetIndex) {\r\n      this.changeActivatedRelationIndex(targetIndex);\r\n    },\r\n    onTabEdit(targetIndex, action) {\r\n      if (action == \"remove\") {\r\n        this.removeRelationByIndex(targetIndex);\r\n      }\r\n    },\r\n    attrDragHandler(event) {\r\n      event.dataTransfer.setData(\"info\", event.target.dataset.info);\r\n      event.dataTransfer.setData(\"type\", \"attr\");\r\n      sessionStorage.setItem(\"info\", event.target.dataset.info);\r\n      sessionStorage.setItem(\"type\", \"attr\");\r\n      sessionStorage.setItem(\"id\", event.target.id);\r\n      this.setDragSource(false);\r\n    },\r\n\r\n    attrAllowDrop(event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    },\r\n\r\n    attrDropHandler(event) {\r\n      event.preventDefault();\r\n      if (event.dataTransfer.getData(\"type\") !== \"attr\") {\r\n        return;\r\n      }\r\n      let op1 = JSON.parse(event.dataTransfer.getData(\"info\"));\r\n      let op2 = JSON.parse(event.target.dataset.info);\r\n      //union\r\n      let colorList = Utils.genRandomColor(1);\r\n      let valueList = [];\r\n      op1.valueList.forEach((item) => {\r\n        valueList.push(item);\r\n      });\r\n      op2.valueList.forEach((item) => {\r\n        valueList.push(item);\r\n      });\r\n      let strName = {\r\n        operator: this.associationRule,\r\n        parameters: [op1.strName, op2.strName],\r\n      };\r\n      let name1 = op1.data ? `${op1.data}.${op1.attribute}` : op1.attribute;\r\n      let name2 = op2.data ? `${op2.data}.${op2.attribute}` : op2.attribute;\r\n      let res = {\r\n        strName: strName,\r\n        attribute: `${this.associationRule}(${name1}, ${name2})`,\r\n        color: colorList[0],\r\n        valueList: Utils.unique(valueList),\r\n      };\r\n      this.storeAttrInfo(res);\r\n      console.log(res);\r\n    },\r\n\r\n    openMenu(e, item) {\r\n      this.rightClickItem = item;\r\n      this.rightClickItemIsCategorical = Utils.isCategorical(item.valueList);\r\n      this.menuSortEnable = this.menuFilterEnable = this.menuBinEnable = false;\r\n      this.menuSort = 1;\r\n      if (this.rightClickItemIsCategorical) {\r\n        this.menuFilterValue = item.valueList;\r\n      } else {\r\n        this.menuBinUpperBound = this.menuFilterUpperBound = Math.max(\r\n          ...item.valueList\r\n        );\r\n        this.menuBinLowerBound = this.menuFilterLowerBound = Math.min(\r\n          ...item.valueList\r\n        );\r\n        this.menuBinStep = 5;\r\n      }\r\n\r\n      // console.log(item);\r\n      // console.log(this.rightClickItemIsCategorical);\r\n      // console.log(this.menuFilterValue);\r\n\r\n      let x = e.clientX;\r\n      let y = e.clientY;\r\n\r\n      this.top = y;\r\n      this.left = x;\r\n\r\n      this.visible = true;\r\n    },\r\n    closeMenu(e) {\r\n      let x = e.clientX;\r\n      let y = e.clientY;\r\n      let menu = document.getElementById(\"menu\");\r\n      if (\r\n        x < this.left ||\r\n        x > this.left + menu.clientWidth ||\r\n        y < this.top ||\r\n        y > this.top + menu.clientHeight\r\n      ) {\r\n        this.visible = false;\r\n      }\r\n    },\r\n\r\n    onFilterCheckboxChange() {\r\n      console.log(this.menuFilterValue);\r\n    },\r\n\r\n    onMenuReset() {\r\n      this.menuSortEnable = this.menuFilterEnable = this.menuBinEnable = false;\r\n      this.menuSort = 1;\r\n      if (this.rightClickItemIsCategorical) {\r\n        this.menuFilterValue = this.rightClickItem.valueList;\r\n      } else {\r\n        this.menuBinUpperBound = this.menuFilterUpperBound = Math.max(\r\n          ...this.rightClickItem.valueList\r\n        );\r\n        this.menuBinLowerBound = this.menuFilterLowerBound = Math.min(\r\n          ...this.rightClickItem.valueList\r\n        );\r\n        this.menuBinStep = 5;\r\n      }\r\n    },\r\n\r\n    onMenuApply() {\r\n      if (\r\n        !this.menuSortEnable &&\r\n        !this.menuBinEnable &&\r\n        !this.menuFilterEnable\r\n      ) {\r\n        this.$message.error(\"Please select an action\");\r\n        return;\r\n      }\r\n      let op = this.rightClickItem;\r\n      let associationRule;\r\n      let colorList = Utils.genRandomColor(1);\r\n\r\n      if (this.menuSortEnable) {\r\n        if (this.menuSort == 1) {\r\n          associationRule = \"ascsort\";\r\n        } else if (this.menuSort == 2) {\r\n          associationRule = \"descsort\";\r\n        } else {\r\n          this.$message.error(\"Sort Type Undefined\");\r\n        }\r\n        let valueList = [];\r\n        op.valueList.forEach((item) => {\r\n          valueList.push(item);\r\n        });\r\n        if (associationRule == \"ascsort\") {\r\n          valueList.sort();\r\n        } else {\r\n          valueList.sort().reverse();\r\n        }\r\n        let strName = {\r\n          operator: associationRule,\r\n          parameters: [op.strName],\r\n        };\r\n        let attrName = op.data ? `${op.data}.${op.attribute}` : op.attribute;\r\n        let res = {\r\n          strName: strName,\r\n          attribute: `${associationRule}(${attrName})`,\r\n          color: colorList[0],\r\n          valueList: Utils.unique(valueList),\r\n        };\r\n        this.storeAttrInfo(res);\r\n        console.log(res);\r\n      } else if (this.menuBinEnable) {\r\n        associationRule = \"bin\";\r\n        if (this.menuBinLowerBound > this.menuBinUpperBound) {\r\n          this.$message.error(\"Illegal bound for binning\");\r\n          return;\r\n        }\r\n        let interval =\r\n          (this.menuBinUpperBound - this.menuBinLowerBound) / this.menuBinStep;\r\n        let valueList = [];\r\n        for (let i = 0; i < this.menuBinStep; i++) {\r\n          let low = this.menuBinLowerBound + i * interval,\r\n            high = low + interval;\r\n          low = Math.round(low * 100) / 100;\r\n          high = Math.round(high * 100) / 100;\r\n          valueList.push(\r\n            `[${low}, ${high}` + (i < this.menuBinStep - 1 ? \")\" : \"]\")\r\n          );\r\n        }\r\n        let strName = {\r\n          operator: associationRule,\r\n          parameters: [\r\n            op.strName,\r\n            { value: this.menuBinStep },\r\n            { value: this.menuBinLowerBound },\r\n            { value: this.menuBinUpperBound },\r\n          ],\r\n        };\r\n        let attrName = op.data ? `${op.data}.${op.attribute}` : op.attribute;\r\n        let res = {\r\n          strName: strName,\r\n          attribute: `${associationRule}(${attrName}, ${this.menuBinStep}, ${this.menuBinLowerBound}, ${this.menuBinUpperBound})`,\r\n          color: colorList[0],\r\n          valueList: valueList,\r\n        };\r\n        this.storeAttrInfo(res);\r\n        console.log(res);\r\n      } else if (this.menuFilterEnable) {\r\n        if (this.rightClickItemIsCategorical) {\r\n          associationRule = \"filterByValue\";\r\n          let valueList = [];\r\n          this.menuFilterValue.forEach((item) => {\r\n            valueList.push(item);\r\n          });\r\n          if (valueList.length == 0) {\r\n            this.$message.error(\"No satisfied item\");\r\n            return;\r\n          }\r\n          let parameters = [op.strName];\r\n          valueList.forEach((item) => {\r\n            parameters.push({ value: item });\r\n          });\r\n          let strName = {\r\n            operator: associationRule,\r\n            parameters,\r\n          };\r\n          let attrName = op.data ? `${op.data}.${op.attribute}` : op.attribute;\r\n          let attributeName = `${associationRule}(${attrName}`;\r\n          valueList.forEach((item) => {\r\n            attributeName += `, ${item}`;\r\n          });\r\n          attributeName += \")\";\r\n          let res = {\r\n            strName: strName,\r\n            attribute: attributeName,\r\n            color: colorList[0],\r\n            valueList: Utils.unique(valueList),\r\n          };\r\n          this.storeAttrInfo(res);\r\n          console.log(res);\r\n        } else {\r\n          associationRule = \"filterByBound\";\r\n          let valueList = [];\r\n          op.valueList.forEach((item) => {\r\n            if (\r\n              item >= this.menuFilterLowerBound &&\r\n              item <= this.menuFilterUpperBound\r\n            ) {\r\n              valueList.push(item);\r\n            }\r\n          });\r\n          if (valueList.length == 0) {\r\n            this.$message.error(\"No satisfied item\");\r\n            return;\r\n          }\r\n          let strName = {\r\n            operator: associationRule,\r\n            parameters: [\r\n              op.strName,\r\n              { value: this.menuFilterLowerBound },\r\n              { value: this.menuFilterUpperBound },\r\n            ],\r\n          };\r\n          let res = {\r\n            strName: strName,\r\n            attribute: `${associationRule}(${op.attribute}, ${this.menuFilterLowerBound}, ${this.menuFilterUpperBound})`,\r\n            color: colorList[0],\r\n            valueList: Utils.unique(valueList),\r\n          };\r\n          this.storeAttrInfo(res);\r\n          console.log(res);\r\n        }\r\n      }\r\n    },\r\n  },\r\n  components: {\r\n    Spreadsheet,\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.relation-view {\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n.relations-container {\r\n  min-height: 10%;\r\n  overflow: scroll;\r\n  text-align: left;\r\n  margin: 20px 0 5px 0;\r\n}\r\n\r\n.attrInfo-container {\r\n  min-height: 30%;\r\n  width: 90%;\r\n  overflow: auto;\r\n  text-align: left;\r\n  margin-left: 5%;\r\n  margin-right: 5%;\r\n  margin-top: 20px;\r\n}\r\n\r\n.attrInfo-container .attrInfo-box {\r\n  height: 40px;\r\n  width: auto;\r\n  display: inline-block;\r\n  margin-right: 30px;\r\n}\r\n\r\n.attrInfo-container .attrInfo-block {\r\n  display: inline-block;\r\n  width: 20px;\r\n  height: 20px;\r\n  vertical-align: middle;\r\n  pointer-events: none;\r\n}\r\n\r\n.attrInfo-container .attrInfo-text {\r\n  line-height: 20px;\r\n  height: 20px;\r\n  font-size: 14px;\r\n  text-align: center;\r\n  vertical-align: middle;\r\n  display: inline-block;\r\n  margin-left: 9px;\r\n  pointer-events: none;\r\n}\r\n\r\n.relations-container::-webkit-scrollbar {\r\n  display: none; /* Chrome Safari */\r\n}\r\n\r\n.contextmenu {\r\n  margin: 0;\r\n  background: #fff;\r\n  z-index: 3000;\r\n  position: fixed;\r\n  list-style-type: none;\r\n  padding: 10px 10px;\r\n  border: 0.5px solid #dbd8d8;\r\n  border-radius: 15px;\r\n  overflow: scroll;\r\n  text-align: left;\r\n}\r\n\r\n.contextmenu::-webkit-scrollbar {\r\n  /*隐藏滚轮*/\r\n  display: none;\r\n}\r\n\r\n.dashline {\r\n  margin-top: 7px;\r\n  border-top: 2px dashed #cccccc;\r\n  height: 1px;\r\n  overflow: hidden;\r\n}\r\n\r\n.menubutton {\r\n  width: 52px;\r\n  height: 26px;\r\n  padding: 0px 2px 0px 2px;\r\n  margin: auto 7px auto 7px;\r\n  text-align: center;\r\n  display: inline-block;\r\n}\r\n\r\n.menuButtonContainer {\r\n  vertical-align: center;\r\n  text-align: center;\r\n  margin: 7px auto;\r\n}\r\n\r\n.menuInputNumber {\r\n  width: 72px;\r\n  height: 30px;\r\n  display: inline-block;\r\n  margin: 4px auto 4px auto;\r\n  padding: 0px 2px 4px 2px;\r\n}\r\n\r\n.menutext {\r\n  display: inline-block;\r\n  margin-right: 5px;\r\n}\r\n\r\n.menuswitch {\r\n  display: inline-block;\r\n}\r\n\r\n.menuInputNumberLine {\r\n  display: inline-block;\r\n  border-top: 2px dashed;\r\n  width: 10px;\r\n  margin: 3px 5px 6px 5px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RelationView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RelationView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RelationView.vue?vue&type=template&id=cc5791ce&scoped=true&\"\nimport script from \"./RelationView.vue?vue&type=script&lang=js&\"\nexport * from \"./RelationView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RelationView.vue?vue&type=style&index=0&id=cc5791ce&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cc5791ce\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"view spreadsheet-view\"},[_c('div',{staticClass:\"view-title\"},[_vm._v(\"Target Table\")]),_c('div',{staticClass:\"spreadsheet-container\"},[_c('spreadsheet',{key:JSON.stringify(this.currentTable),attrs:{\"name\":\"targetTable\",\"initRowNum\":14,\"initColNum\":8,\"editable\":true,\"table\":this.currentTable}})],1),_c('div',{staticClass:\"specmenu\"},[_c('div',{staticClass:\"speccomponent\"},[_c('div',{staticClass:\"spectitle\"},[_vm._v(\"Row header:\")]),_c('div',{staticClass:\"specinput\",attrs:{\"id\":\"rowinput\"},on:{\"dragover\":_vm.dragoverHandler,\"drop\":_vm.dropHandler}},_vm._l((this.row_header),function(item,index){return _c('div',{key:(\"row_\" + index),staticClass:\"specitem\",attrs:{\"id\":(\"spec_row_\" + index + \"_\" + (JSON.stringify(item))),\"draggable\":true,\"data-info\":JSON.stringify(item)},on:{\"dragstart\":_vm.dragstartHandler}},[(index != 0)?_c('div',{staticClass:\"specoperator\"},[_vm._v(\"×\")]):_vm._e(),_c('div',{staticClass:\"spectext\"},[_vm._v(\" \"+_vm._s(item.data ? ((item.data) + \".\" + (item.attribute)) : (\"\" + (item.attribute)))+\" \")])])}),0)]),_c('div',{staticClass:\"speccomponent\"},[_c('div',{staticClass:\"spectitle\"},[_vm._v(\"Column header:\")]),_c('div',{staticClass:\"specinput\",attrs:{\"id\":\"columninput\"},on:{\"dragover\":_vm.dragoverHandler,\"drop\":_vm.dropHandler}},_vm._l((this.column_header),function(item,index){return _c('div',{key:(\"column_\" + index),staticClass:\"specitem\",attrs:{\"id\":(\"spec_column_\" + index + \"_\" + (JSON.stringify(item))),\"draggable\":true,\"data-info\":JSON.stringify(item)},on:{\"dragstart\":_vm.dragstartHandler}},[(index != 0)?_c('div',{staticClass:\"specoperator\"},[_vm._v(\"×\")]):_vm._e(),_c('div',{staticClass:\"spectext\"},[_vm._v(\" \"+_vm._s(item.data ? ((item.data) + \".\" + (item.attribute)) : (\"\" + (item.attribute)))+\" \")])])}),0)]),_c('div',{staticClass:\"speccomponent\"},[_c('div',{staticClass:\"spectitle\"},[_vm._v(\"Body:\")]),_c('div',{staticClass:\"specinput\",attrs:{\"id\":\"bodyinput\"},on:{\"dragover\":_vm.dragoverHandler,\"drop\":_vm.dropHandler}},_vm._l((this.body),function(item,index){return _c('div',{key:(\"body_\" + index),staticClass:\"specitem\",attrs:{\"id\":(\"spec_body_\" + index + \"_\" + (JSON.stringify(item))),\"draggable\":true,\"data-info\":JSON.stringify(item)},on:{\"dragstart\":_vm.dragstartHandler}},[(index != 0)?_c('div',{staticClass:\"specoperator\"},[_vm._v(\"+\")]):_vm._e(),_c('div',{staticClass:\"spectext\"},[_vm._v(\" \"+_vm._s(item.data ? ((item.data) + \".\" + (item.attribute)) : (\"\" + (item.attribute)))+\" \")])])}),0)]),_c('div',{staticClass:\"spectoolbar\"},[_c('a-button',{staticClass:\"specbutton\",on:{\"click\":_vm.resetHandler}},[_vm._v(\"Reset\")])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"view spreadsheet-view\">\r\n    <div class=\"view-title\">Target Table</div>\r\n    <div class=\"spreadsheet-container\">\r\n      <spreadsheet\r\n        name=\"targetTable\"\r\n        :initRowNum=\"14\"\r\n        :initColNum=\"8\"\r\n        :editable=\"true\"\r\n        :table=\"this.currentTable\"\r\n        :key=\"JSON.stringify(this.currentTable)\"\r\n      ></spreadsheet>\r\n    </div>\r\n    <div class=\"specmenu\">\r\n      <div class=\"speccomponent\">\r\n        <div class=\"spectitle\">Row header:</div>\r\n        <div\r\n          class=\"specinput\"\r\n          id=\"rowinput\"\r\n          @dragover=\"dragoverHandler\"\r\n          @drop=\"dropHandler\"\r\n        >\r\n          <div\r\n            v-for=\"(item, index) in this.row_header\"\r\n            :key=\"`row_${index}`\"\r\n            :id=\"`spec_row_${index}_${JSON.stringify(item)}`\"\r\n            class=\"specitem\"\r\n            :draggable=\"true\"\r\n            :data-info=\"JSON.stringify(item)\"\r\n            @dragstart=\"dragstartHandler\"\r\n          >\r\n            <div v-if=\"index != 0\" class=\"specoperator\">×</div>\r\n            <div class=\"spectext\">\r\n              {{\r\n                item.data\r\n                  ? `${item.data}.${item.attribute}`\r\n                  : `${item.attribute}`\r\n              }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"speccomponent\">\r\n        <div class=\"spectitle\">Column header:</div>\r\n        <div\r\n          class=\"specinput\"\r\n          id=\"columninput\"\r\n          @dragover=\"dragoverHandler\"\r\n          @drop=\"dropHandler\"\r\n        >\r\n          <div\r\n            v-for=\"(item, index) in this.column_header\"\r\n            :key=\"`column_${index}`\"\r\n            :id=\"`spec_column_${index}_${JSON.stringify(item)}`\"\r\n            class=\"specitem\"\r\n            :draggable=\"true\"\r\n            :data-info=\"JSON.stringify(item)\"\r\n            @dragstart=\"dragstartHandler\"\r\n          >\r\n            <div v-if=\"index != 0\" class=\"specoperator\">×</div>\r\n            <div class=\"spectext\">\r\n              {{\r\n                item.data\r\n                  ? `${item.data}.${item.attribute}`\r\n                  : `${item.attribute}`\r\n              }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"speccomponent\">\r\n        <div class=\"spectitle\">Body:</div>\r\n        <div\r\n          class=\"specinput\"\r\n          id=\"bodyinput\"\r\n          @dragover=\"dragoverHandler\"\r\n          @drop=\"dropHandler\"\r\n        >\r\n          <div\r\n            v-for=\"(item, index) in this.body\"\r\n            :key=\"`body_${index}`\"\r\n            :id=\"`spec_body_${index}_${JSON.stringify(item)}`\"\r\n            class=\"specitem\"\r\n            :draggable=\"true\"\r\n            :data-info=\"JSON.stringify(item)\"\r\n            @dragstart=\"dragstartHandler\"\r\n          >\r\n            <div v-if=\"index != 0\" class=\"specoperator\">+</div>\r\n            <div class=\"spectext\">\r\n              {{\r\n                item.data\r\n                  ? `${item.data}.${item.attribute}`\r\n                  : `${item.attribute}`\r\n              }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"spectoolbar\">\r\n        <!-- <a-button type=\"primary\" class=\"specbutton\" @click=\"applyHandler\"\r\n          >Apply</a-button\r\n        > -->\r\n        <a-button class=\"specbutton\" @click=\"resetHandler\">Reset</a-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Spreadsheet from \"./Spreadsheet/Index.vue\";\r\nimport { mapActions, mapState } from \"vuex\";\r\nimport { transform } from \"rigel-tools\";\r\nimport Utils from \"@/utils.js\";\r\n\r\nexport default {\r\n  name: \"SpreadsheetView\",\r\n  // data() {\r\n  //   return {\r\n  //     row_header: [],\r\n  //     // row_header: [\r\n  //     //   {\r\n  //     //     attribute: \"state\",\r\n  //     //     color: \"rgb(243,26,244,0.4)\",\r\n  //     //     data: \"crime\",\r\n  //     //     strName: {\r\n  //     //       attribute: \"state\",\r\n  //     //       data: \"crime\",\r\n  //     //       operator: \"attr\",\r\n  //     //     },\r\n  //     //     valueList: [\"Alabama\", \"Alaska\"],\r\n  //     //   },\r\n  //     // ],\r\n  //     column_header: [],\r\n  //     body: [],\r\n  //   };\r\n  // },\r\n  computed: {\r\n    ...mapState([\"currentTable\", \"rawRelations\", \"attrInfo\", \"newSpec\", \"row_header\", \"column_header\", \"body\"]),\r\n  },\r\n  watch: {\r\n    newSpec(val, oldval) {\r\n      console.log(this.newSpec);\r\n      if (val) {\r\n        // this.row_header = Utils.specObj2List(val[\"row_header\"]);\r\n        // this.column_header = Utils.specObj2List(val[\"column_header\"]);\r\n        // this.body = Utils.specObj2List(val[\"body\"]);\r\n        this.setSpec({\r\n          \"row_header\": Utils.specObj2List(val[\"row_header\"]),\r\n          \"column_header\": Utils.specObj2List(val[\"column_header\"]),\r\n          \"body\": Utils.specObj2List(val[\"body\"])\r\n        });\r\n        this.storeNewSpec(null);\r\n        try{\r\n          let alterSpec = Utils.genAlterSpec(this.row_header, this.column_header, this.body);\r\n          this.storeAlterSpecList(alterSpec);\r\n          let exploreSpec = Utils.genExploreSpec(this.row_header, this.column_header, this.body, this.attrInfo);\r\n          this.storeSuggestion(exploreSpec);\r\n        } catch(err) {\r\n          console.log(err.message);\r\n          this.$message.error(err.message);\r\n        }\r\n      }\r\n    },\r\n    row_header(val, oldval) {\r\n      this.applyHandler();\r\n    },\r\n    column_header(val, oldval) {\r\n      this.applyHandler();\r\n    },\r\n    body(val, oldval) {\r\n      this.applyHandler();\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      \"storeCurrentTable\",\r\n      \"storeAlterSpecList\",\r\n      \"storeSuggestion\",\r\n      \"storeNewSpec\",\r\n      \"setSpec\",\r\n    ]),\r\n    onInput(event) {\r\n      console.log(event);\r\n    },\r\n    dragstartHandler(event) {\r\n      // event.dataTransfer.setData(\"info\", event.target.dataset.info);\r\n      sessionStorage.setItem(\"info\", event.target.dataset.info);\r\n      sessionStorage.setItem(\"type\", \"spec\");\r\n      sessionStorage.setItem(\"id\", event.target.id);\r\n    },\r\n    dragoverHandler(event) {\r\n      let type = sessionStorage.getItem(\"type\");\r\n      if (type == \"spec\" || type == \"attr\") {\r\n        event.preventDefault();\r\n      } else {\r\n        return;\r\n      }\r\n      let pre = sessionStorage.getItem(\"info\"),\r\n        current = event.target;\r\n      let preItem = JSON.parse(pre);\r\n      let preNode = document.getElementById(sessionStorage.getItem(\"id\"));\r\n      if (!preNode || preNode == current) return;\r\n\r\n      let sourceList, targetList, sourceIndex, targetIndex;\r\n      console.log(type);\r\n\r\n      if (type == \"attr\") {\r\n        // sessionStorage.setItem(\"type\", \"spec\");\r\n      } else {\r\n        sourceList = this.checkListType(preNode.parentNode);\r\n        sourceIndex = this._index(preNode);\r\n      }\r\n\r\n      if (current.className == \"specinput\") {\r\n        if (\r\n          current.lastChild &&\r\n          event.clientX <= current.lastChild.getBoundingClientRect().right\r\n        ) {\r\n          return;\r\n        }\r\n        targetList = this.checkListType(current);\r\n        targetIndex =\r\n          sourceList == targetList ? targetList.length - 1 : targetList.length;\r\n      } else {\r\n        targetList = this.checkListType(current.parentNode);\r\n        targetIndex = this._index(current);\r\n      }\r\n\r\n      console.log(sourceList, targetList);\r\n      if (type == \"attr\") {\r\n        sessionStorage.setItem(\"type\", \"spec\");\r\n        if (current.className == \"specinput\") {\r\n          targetList.push(preItem);\r\n        } else {\r\n          targetList.splice(targetIndex, 0, preItem);\r\n        }\r\n      } else {\r\n        if (current.className == \"specinput\") {\r\n          sourceList.splice(sourceIndex, 1);\r\n          targetList.push(preItem);\r\n        } else {\r\n          sourceList.splice(sourceIndex, 1);\r\n          targetList.splice(targetIndex, 0, preItem);\r\n        }\r\n      }\r\n\r\n      this.$forceUpdate();\r\n      let listId =\r\n        current.className == \"specinput\"\r\n          ? this.listToId(current)\r\n          : this.listToId(current.parentNode);\r\n      let newId = `spec_${listId}_${targetIndex}_${pre}`;\r\n      sessionStorage.setItem(\"id\", newId);\r\n      console.log(newId);\r\n    },\r\n    dropHandler(event) {\r\n      event.preventDefault();\r\n      console.log(\"drop\");\r\n      let spec = Utils.genSpec(this.row_header, this.column_header, this.body);\r\n      let sch = {\r\n        data: this.rawRelations,\r\n        target_table: [spec],\r\n      };\r\n      console.log(sch);\r\n      try {\r\n        let res = transform(sch)[0];\r\n        console.log(res);\r\n        for (let i = 0; i < res.length; i++) {\r\n          for (let j = 0; j < res[i].length; j++) {\r\n            if (res[i][j]) {\r\n              let tmp = {};\r\n              tmp.source = spec[\"row_header\"];\r\n              tmp.value = res[i][j].value ? res[i][j].value : res[i][j];\r\n              res[i][j] = tmp;\r\n            }\r\n          }\r\n        }\r\n        console.log(res);\r\n        this.storeCurrentTable(res);\r\n      } catch (err) {\r\n        this.$message.error(\"Illegal specification!\");\r\n      }\r\n    },\r\n    _index(el) {\r\n      var index = 0;\r\n      if (!el || !el.parentNode) {\r\n        return -1;\r\n      }\r\n      while (el && (el = el.previousElementSibling)) {\r\n        index++;\r\n      }\r\n      return index;\r\n    },\r\n    checkListType(el) {\r\n      let id = el.id;\r\n      if (id == \"rowinput\") {\r\n        return this.row_header;\r\n      } else if (id == \"columninput\") {\r\n        return this.column_header;\r\n      } else if (id == \"bodyinput\") {\r\n        return this.body;\r\n      }\r\n    },\r\n    listToId(el) {\r\n      let id = el.id;\r\n      if (id == \"rowinput\") {\r\n        return \"row\";\r\n      } else if (id == \"columninput\") {\r\n        return \"column\";\r\n      } else if (id == \"bodyinput\") {\r\n        return \"body\";\r\n      }\r\n    },\r\n    resetHandler() {\r\n      // this.row_header = [];\r\n      // this.column_header = [];\r\n      // this.body = [];\r\n      this.setSpec({\r\n        \"row_header\": [],\r\n        \"column_header\": [],\r\n        \"body\": []\r\n      });\r\n      this.$forceUpdate();\r\n    },\r\n    applyHandler() {\r\n      try{\r\n        let alterSpec = Utils.genAlterSpec(this.row_header, this.column_header, this.body);\r\n        this.storeAlterSpecList(alterSpec);\r\n        let exploreSpec = Utils.genExploreSpec(this.row_header, this.column_header, this.body, this.attrInfo);\r\n        this.storeSuggestion(exploreSpec);\r\n      } catch(err) {\r\n        console.log(err.message);\r\n        this.$message.error(err.message);\r\n      }\r\n    },\r\n  },\r\n  components: {\r\n    Spreadsheet,\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.spreadsheet-view {\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n.spreadsheet-container {\r\n  height: 60%;\r\n  min-width: 500px;\r\n  overflow: scroll;\r\n  margin: 20px 0 5px 0;\r\n}\r\n\r\n.spreadsheet-container::-webkit-scrollbar {\r\n  display: none; /* Chrome Safari */\r\n}\r\n\r\n.specmenu {\r\n  text-align: left;\r\n  margin-top: 50px;\r\n  vertical-align: center;\r\n  overflow: scroll;\r\n  height: 40%;\r\n}\r\n\r\n.specmenu::-webkit-scrollbar {\r\n  display: none;\r\n}\r\n\r\n.speccomponent {\r\n  margin-bottom: 21px;\r\n}\r\n\r\n.spectitle {\r\n  display: inline-block;\r\n  margin-right: 10px;\r\n  /* margin-bottom: 15px; */\r\n  height: 27px;\r\n  width: 130px;\r\n  text-align: right;\r\n}\r\n\r\n.specinput {\r\n  background: white;\r\n  display: inline-block;\r\n  min-height: 28px;\r\n  width: 350px;\r\n  margin-bottom: -9px;\r\n  border-radius: 4px;\r\n  border: 1px solid rgba(187, 187, 187, 100);\r\n}\r\n\r\n.specinput::-webkit-scrollbar {\r\n  display: none; /* Chrome Safari */\r\n}\r\n\r\n.specitem {\r\n  height: 20px;\r\n  margin: 2px auto 2px auto;\r\n  padding-left: 3px;\r\n  padding-right: 3px;\r\n  display: inline-block;\r\n}\r\n\r\n.specoperator {\r\n  user-select: none;\r\n  pointer-events: none;\r\n  display: inline-block;\r\n  margin: 2px 4px 2px auto;\r\n}\r\n\r\n.spectext {\r\n  user-select: none;\r\n  pointer-events: none;\r\n  display: inline-block;\r\n  border-radius: 4px;\r\n  border: 1px solid;\r\n}\r\n\r\n.specbutton {\r\n  width: 52px;\r\n  height: 26px;\r\n  padding: 0px 2px 0px 2px;\r\n  margin: auto 7px auto 7px;\r\n  text-align: center;\r\n  display: inline-block;\r\n}\r\n\r\n.spectoolbar {\r\n  vertical-align: center;\r\n  text-align: center;\r\n  margin: 7px auto 50px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpreadsheetView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpreadsheetView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SpreadsheetView.vue?vue&type=template&id=2b0b1973&scoped=true&\"\nimport script from \"./SpreadsheetView.vue?vue&type=script&lang=js&\"\nexport * from \"./SpreadsheetView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SpreadsheetView.vue?vue&type=style&index=0&id=2b0b1973&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2b0b1973\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"view suggestion-view\"},[_c('div',{staticClass:\"view-title\"},[_vm._v(\"Suggestions\")]),_c('div',{staticClass:\"suggestion-container\"},[(this.partialSpecSuggestion)?_c('div',{staticClass:\"suggestion-unit\"},[_c('div',{staticClass:\"suggestionTitle\"},[_vm._v(\"Disambiguate user interactions.\")]),_c('Mycollapse',_vm._l((this.partialSpecSuggestion),function(item,index){return _c('Mycollapsepanel',{key:index,attrs:{\"header\":((item.itemDescription) + \" belongs to \" + (item.source))}},_vm._l((item.partialSpecList),function(partialSpec,index2){return _c('div',{key:index2,staticClass:\"partialspecpanel\",on:{\"click\":function($event){return _vm.applyPartialSpec(partialSpec)}}},[_vm._v(\" \"+_vm._s(partialSpec.description)+\" \")])}),0)}),1)],1):_c('div',[(this.alterSpecList.length == 0 && this.suggestions.length == 0)?_c('div',{staticClass:\"suggestion-empty\"},[_c('a-empty',{staticStyle:{\"padding-top\":\"10px\"}})],1):_vm._e(),(this.alterSpecList.length > 0)?_c('div',{staticClass:\"suggestion-unit\"},[_c('div',{staticClass:\"suggestionTitle\"},[_vm._v(\" Alternatives (Rearrangle current attributes) \")]),_c('div',{staticClass:\"alter-unit\"},_vm._l((this.alterSpecList),function(suggestion,i){return _c('div',{key:(\"top\" + i),staticClass:\"alter-panel\",on:{\"click\":function($event){return _vm.applySpec(suggestion)}}},[_vm._v(\" \"+_vm._s(suggestion.description)+\" \")])}),0)]):_vm._e(),(this.suggestions.length > 0)?_c('div',{staticClass:\"suggestion-unit\"},[_c('div',{staticClass:\"suggestionTitle\"},[_vm._v(\"Variations (Add more attributes)\")]),_c('div',{staticClass:\"variation-unit\"},[_c('Varunit',{attrs:{\"content\":this.suggestions}})],1)]):_vm._e()])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (this.finalContent)?_c('div',[_c('Mycollapse',_vm._l((this.finalContent),function(item,index){return _c('Mycollapsepanel',{key:index,attrs:{\"header\":(\"Add \" + (item.add))}},[_c('Mycollapse',_vm._l((item.list),function(spec,index2){return _c('Mycollapsepanel',{key:index2,attrs:{\"header\":spec.description,\"applySpec\":spec}},[_c('div',{staticClass:\"applypanel\",on:{\"click\":function($event){return _vm.handleApply(spec)}}},[_vm._v(\"Apply\")]),_c('Mycollapse',[_c('Mycollapsepanel',{attrs:{\"header\":\"Alternatives (Rearrange current attributes)\"}},[_c('alterpanel',{attrs:{\"spec\":spec}})],1),_c('Mycollapsepanel',{attrs:{\"header\":\"Variations (Add more attributes)\",\"spec\":spec}})],1)],1)}),1)],1)}),1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._l((this.alterSuggestion),function(suggestion,index3){return _c('div',{key:index3,staticClass:\"applypanel\",on:{\"click\":function($event){return _vm.handleApply(suggestion)}}},[_vm._v(\" \"+_vm._s(suggestion.description)+\" \")])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div\r\n      v-for=\"(suggestion, index3) in this.alterSuggestion\"\r\n      :key=\"index3\"\r\n      class=\"applypanel\"\r\n      @click=\"handleApply(suggestion)\"\r\n    >\r\n      {{ suggestion.description }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Utils from \"@/utils.js\";\r\nimport { mapState, mapActions } from \"vuex\";\r\nimport { transform } from \"rigel-tools\";\r\nexport default {\r\n  name: \"alterpanel\",\r\n  props: {\r\n    spec: {\r\n      type: Object,\r\n      default: null,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      alterSuggestion: [],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\"rawRelations\"]),\r\n  },\r\n  mounted() {\r\n    if (this.spec) {\r\n\t\t\tlet spec = this.spec;\r\n      let row_header = Utils.specObj2List(spec.row_header);\r\n      let column_header = Utils.specObj2List(spec.column_header);\r\n      let body = Utils.specObj2List(spec.body);\r\n      try {\r\n        let alterSuggestion = Utils.genAlterSpec(\r\n          row_header,\r\n          column_header,\r\n          body\r\n        );\r\n        this.alterSuggestion = alterSuggestion;\r\n      } catch (err) {\r\n        console.log(err.message);\r\n        this.$message.error(err.message);\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    spec(val, oldval) {\r\n      if(val != oldval) {\r\n        if (this.spec) {\r\n          let spec = this.spec;\r\n          let row_header = Utils.specObj2List(spec.row_header);\r\n          let column_header = Utils.specObj2List(spec.column_header);\r\n          let body = Utils.specObj2List(spec.body);\r\n          try {\r\n            let alterSuggestion = Utils.genAlterSpec(\r\n              row_header,\r\n              column_header,\r\n              body\r\n            );\r\n            this.alterSuggestion = alterSuggestion;\r\n          } catch (err) {\r\n            console.log(err.message);\r\n            this.$message.error(err.message);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\"storeCurrentTable\", \"storeNewSpec\"]),\r\n    handleApply(spec) {\r\n      if (!spec) return;\r\n      let sch = {\r\n        data: this.rawRelations,\r\n        target_table: [spec],\r\n      };\r\n      console.log(sch);\r\n      try {\r\n        let res = transform(sch)[0];\r\n        // console.log(res);\r\n        for (let i = 0; i < res.length; i++) {\r\n          for (let j = 0; j < res[i].length; j++) {\r\n            if (res[i][j]) {\r\n              let tmp = {};\r\n              tmp.source = spec[\"row_header\"];\r\n              tmp.value = res[i][j].value ? res[i][j].value : res[i][j];\r\n              res[i][j] = tmp;\r\n            }\r\n          }\r\n        }\r\n        // console.log(res);\r\n        this.storeCurrentTable(res);\r\n        this.storeNewSpec(spec);\r\n      } catch (err) {\r\n        this.$message.error(\"Illegal specification!\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.applypanel {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  background-color: #eaebee;\r\n  padding: 5px 0px 5px 7px;\r\n  margin-bottom: 3px;\r\n}\r\n.applypanel:hover {\r\n  background-color: #d8d5d5;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=3205b140&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=3205b140&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3205b140\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div v-if=\"this.finalContent\">\r\n    <Mycollapse>\r\n      <Mycollapsepanel\r\n        v-for=\"(item, index) in this.finalContent\"\r\n        :key=\"index\"\r\n        :header=\"`Add ${item.add}`\"\r\n      >\r\n        <Mycollapse>\r\n          <Mycollapsepanel\r\n            v-for=\"(spec, index2) in item.list\"\r\n            :key=\"index2\"\r\n            :header=\"spec.description\"\r\n            :applySpec=\"spec\"\r\n          >\r\n            <div class=\"applypanel\" @click=\"handleApply(spec)\">Apply</div>\r\n            <Mycollapse>\r\n              <Mycollapsepanel\r\n                header=\"Alternatives (Rearrange current attributes)\"\r\n              >\r\n                <alterpanel :spec=\"spec\"/>\r\n              </Mycollapsepanel>\r\n              <Mycollapsepanel\r\n                header=\"Variations (Add more attributes)\"\r\n                :spec=\"spec\"\r\n              >\r\n              </Mycollapsepanel>\r\n            </Mycollapse>\r\n          </Mycollapsepanel>\r\n        </Mycollapse>\r\n      </Mycollapsepanel>\r\n    </Mycollapse>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Utils from \"@/utils.js\";\r\nimport { mapState, mapActions } from \"vuex\";\r\nimport alterpanel from \"../alterpanel/Index.vue\";\r\nimport { transform } from \"rigel-tools\";\r\nexport default {\r\n  name: \"Varunit\",\r\n  props: {\r\n    content: {\r\n      type: Array,\r\n      default: null,\r\n    },\r\n    spec: {\r\n      type: Object,\r\n      default: undefined,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      newContent: null,\r\n      alterSuggestion: [],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\"attrInfo\", \"rawRelations\"]),\r\n    finalContent() {\r\n      if (this.content) return this.content;\r\n      return this.newContent;\r\n    },\r\n  },\r\n  watch: {\r\n    spec(val, oldval) {\r\n      if(val != oldval) {\r\n        this.newContent = this.calcExplore(val);\r\n        this.$forceUpdate();\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    if (!this.content && this.spec) {\r\n      this.newContent = this.calcExplore(this.spec);\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\"storeCurrentTable\", \"storeNewSpec\"]),\r\n    calcExplore(spec) {\r\n      // calculation\r\n      try {\r\n        let row_header = Utils.specObj2List(spec.row_header);\r\n        let column_header = Utils.specObj2List(spec.column_header);\r\n        let body = Utils.specObj2List(spec.body);\r\n        console.log(row_header);\r\n        let exploreSpec = Utils.genExploreSpec(\r\n          row_header,\r\n          column_header,\r\n          body,\r\n          this.attrInfo\r\n        );\r\n        return exploreSpec;\r\n      } catch (err) {\r\n        console.log(err.message);\r\n        this.$message.error(err.message);\r\n      }\r\n      // return ([\r\n      //   {\r\n      //       \"add\": \"union(a,b)\",  // string\r\n      //       \"list\": [\r\n      //           {   // spec数组\r\n      //               \"row_header\": null,\r\n      //               \"column_header\": null,\r\n      //               \"body\": null,\r\n      //               \"description\": \"(a), (b) => (c)\",\r\n      //           },\r\n      //       ]\r\n      //   }\r\n      // ]);\r\n    },\r\n    handleApply(spec) {\r\n      if (!spec) return;\r\n      let sch = {\r\n        data: this.rawRelations,\r\n        target_table: [spec],\r\n      };\r\n      console.log(sch);\r\n      try {\r\n        let res = transform(sch)[0];\r\n        // console.log(res);\r\n        for (let i = 0; i < res.length; i++) {\r\n          for (let j = 0; j < res[i].length; j++) {\r\n            if (res[i][j]) {\r\n              let tmp = {};\r\n              tmp.source = spec[\"row_header\"];\r\n              tmp.value = res[i][j].value ? res[i][j].value : res[i][j];\r\n              res[i][j] = tmp;\r\n            }\r\n          }\r\n        }\r\n        // console.log(res);\r\n        this.storeCurrentTable(res);\r\n        this.storeNewSpec(spec);\r\n      } catch (err) {\r\n        this.$message.error(\"Illegal specification!\");\r\n      }\r\n    },\r\n  },\r\n  components: {\r\n    alterpanel\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.applypanel {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  background-color: #eaebee;\r\n  padding: 5px 0px 5px 7px;\r\n  margin-bottom: 3px;\r\n}\r\n.applypanel:hover {\r\n  background-color: #d8d5d5;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=17247de8&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=17247de8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"17247de8\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"view suggestion-view\">\r\n    <div class=\"view-title\">Suggestions</div>\r\n    <div class=\"suggestion-container\">\r\n      <div v-if=\"this.partialSpecSuggestion\" class=\"suggestion-unit\">\r\n        <div class=\"suggestionTitle\">Disambiguate user interactions.</div>\r\n        <Mycollapse>\r\n          <Mycollapsepanel\r\n            v-for=\"(item, index) in this.partialSpecSuggestion\"\r\n            :key=\"index\"\r\n            :header=\"`${item.itemDescription} belongs to ${item.source}`\"\r\n          >\r\n            <div\r\n              v-for=\"(partialSpec, index2) in item.partialSpecList\"\r\n              :key=\"index2\"\r\n              class=\"partialspecpanel\"\r\n              @click=\"applyPartialSpec(partialSpec)\"\r\n            >\r\n              {{ partialSpec.description }}\r\n            </div>\r\n          </Mycollapsepanel>\r\n        </Mycollapse>\r\n      </div>\r\n      <div v-else>\r\n        <div\r\n          v-if=\"this.alterSpecList.length == 0 && this.suggestions.length == 0\"\r\n          class=\"suggestion-empty\"\r\n        >\r\n          <a-empty style=\"padding-top: 10px\" />\r\n        </div>\r\n        <div class=\"suggestion-unit\" v-if=\"this.alterSpecList.length > 0\">\r\n          <div class=\"suggestionTitle\">\r\n            Alternatives (Rearrangle current attributes)\r\n          </div>\r\n          <div class=\"alter-unit\">\r\n            <div\r\n              v-for=\"(suggestion, i) in this.alterSpecList\"\r\n              :key=\"`top${i}`\"\r\n              class=\"alter-panel\"\r\n              @click=\"applySpec(suggestion)\"\r\n            >\r\n              {{ suggestion.description }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"suggestion-unit\" v-if=\"this.suggestions.length > 0\">\r\n          <div class=\"suggestionTitle\">Variations (Add more attributes)</div>\r\n          <div class=\"variation-unit\">\r\n            <Varunit :content=\"this.suggestions\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapState } from \"vuex\";\r\nimport { transform } from \"rigel-tools\";\r\nimport Varunit from \"./Varunit/Index.vue\";\r\nimport Utils from \"@/utils.js\";\r\n\r\nexport default {\r\n  name: \"SuggestionView\",\r\n  data() {\r\n    return {\r\n      // testcontent: [\r\n      //   {\r\n      //     add: \"union(a,b)\", // string\r\n      //     list: [\r\n      //       {\r\n      //         // spec数组\r\n      //         row_header: null,\r\n      //         column_header: null,\r\n      //         body: null,\r\n      //         description: \"(a), (b) => (c)\",\r\n      //       },\r\n      //     ],\r\n      //   },\r\n      // ],\r\n    };\r\n  },\r\n  computed: mapState([\r\n    \"relations\",\r\n    \"suggestions\",\r\n    \"rawRelations\",\r\n    \"alterSpecList\",\r\n    \"partialSpecSuggestion\",\r\n    \"row_header\",\r\n    \"column_header\",\r\n    \"body\",\r\n    \"currentActiveGrid\",\r\n    \"rowInfo\",\r\n    \"colInfo\",\r\n  ]),\r\n  methods: {\r\n    ...mapActions([\r\n      \"storeCurrentTable\",\r\n      \"storeNewSpec\",\r\n      \"storePartialSpecSuggestion\",\r\n      \"storeRowInfo\",\r\n      \"storeColInfo\",\r\n    ]),\r\n    onSuggestionClick(suggestion) {\r\n      // apply the suggestion\r\n      console.log(suggestion);\r\n    },\r\n    applySpec(spec) {\r\n      // console.log(JSON.stringify(spec));\r\n      // console.log(this.relations);\r\n      let sch = {\r\n        data: this.rawRelations,\r\n        target_table: [spec],\r\n      };\r\n      console.log(sch);\r\n      try {\r\n        let res = transform(sch)[0];\r\n        // console.log(res);\r\n        for (let i = 0; i < res.length; i++) {\r\n          for (let j = 0; j < res[i].length; j++) {\r\n            if (res[i][j]) {\r\n              let tmp = {};\r\n              tmp.source = spec[\"row_header\"];\r\n              tmp.value = res[i][j].value ? res[i][j].value : res[i][j];\r\n              res[i][j] = tmp;\r\n            }\r\n          }\r\n        }\r\n        // console.log(res);\r\n        let table = Utils.mapTable(res, this.rowInfo, this.colInfo);\r\n        this.storeNewSpec(spec);\r\n        this.storeCurrentTable(table);\r\n      } catch (err) {\r\n        this.$message.error(\"Illegal specification!\");\r\n      }\r\n    },\r\n    applyPartialSpec(partialSpec) {\r\n      // console.log(partialSpec);\r\n\r\n      if (partialSpec.row_header) {\r\n        if (!this.rowInfo.len) {\r\n          if (!this.colInfo.len) {\r\n            this.storeRowInfo({\r\n              row: this.currentActiveGrid.row ? this.currentActiveGrid.row : 1,\r\n              column: this.currentActiveGrid.column,\r\n              len: 1,\r\n            });\r\n            this.storeColInfo({\r\n              row: this.currentActiveGrid.row\r\n                ? this.currentActiveGrid.row - 1\r\n                : 0,\r\n              column: this.currentActiveGrid.column + 1,\r\n              len: 0,\r\n            });\r\n          } else {\r\n            // 下面两行是冲突的时候取舍的策略 先这么写 如果后面觉得不合适再改\r\n            let row =\r\n              this.currentActiveGrid.row < this.colInfo.row + this.colInfo.len\r\n                ? this.colInfo + this.colInfo.len\r\n                : this.currentActiveGrid.row;\r\n            let column =\r\n              this.currentActiveGrid.column < this.colInfo.column\r\n                ? this.currentActiveGrid.column\r\n                : this.colInfo.column - 1;\r\n            this.storeRowInfo({\r\n              row,\r\n              column,\r\n              len: 1,\r\n            });\r\n          }\r\n          this.row_header.push(partialSpec.row_header);\r\n        } else {\r\n          if (this.currentActiveGrid.column < this.rowInfo.column) {\r\n            this.storeRowInfo({\r\n              row: this.rowInfo.row,\r\n              column: this.rowInfo.column - 1,\r\n              len: this.rowInfo.len + 1,\r\n            });\r\n            this.row_header.splice(0, 0, partialSpec.row_header);\r\n          } else {\r\n            this.storeRowInfo({\r\n              row: this.rowInfo.row,\r\n              column: this.rowInfo.column,\r\n              len: this.rowInfo.len + 1,\r\n            });\r\n            this.row_header.push(partialSpec.row_header);\r\n            if (\r\n              this.colInfo.column &&\r\n              this.rowInfo.column + this.rowInfo.len > this.colInfo.column\r\n            ) {\r\n              this.storeColInfo({\r\n                row: this.colInfo.row,\r\n                column: this.colInfo.column,\r\n                len: this.colInfo.len + 1,\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if (partialSpec.column_header) {\r\n        if (!this.colInfo.len) {\r\n          if (!this.rowInfo.len) {\r\n            this.storeColInfo({\r\n              row: this.currentActiveGrid.row,\r\n              column: this.currentActiveGrid.column\r\n                ? this.currentActiveGrid.column\r\n                : 1,\r\n              len: 1,\r\n            });\r\n            this.storeRowInfo({\r\n              row: this.currentActiveGrid.row + 1,\r\n              column: this.currentActiveGrid.column\r\n                ? this.currentActiveGrid - 1\r\n                : 0,\r\n              len: 0,\r\n            });\r\n          } else {\r\n            // 下面两行是冲突的时候取舍的策略 先这么写 如果后面觉得不合适再改\r\n            let column =\r\n              this.currentActiveGrid.column <\r\n              this.rowInfo.column + this.rowInfo.len\r\n                ? this.rowInfo.column + this.rowInfo.len\r\n                : this.currentActiveGrid.column;\r\n            let row =\r\n              this.currentActiveGrid.row < this.rowInfo.row\r\n                ? this.currentActiveGrid.row\r\n                : this.rowInfo.row - 1;\r\n            this.storeColInfo({\r\n              row,\r\n              column,\r\n              len: 1,\r\n            });\r\n          }\r\n          this.column_header.push(partialSpec.column_header);\r\n        } else {\r\n          if (this.currentActiveGrid.row < this.colInfo.row) {\r\n            this.storeColInfo({\r\n              row: this.colInfo.row - 1,\r\n              column: this.colInfo.column,\r\n              len: this.colInfo.len + 1,\r\n            });\r\n            this.column_header.splice(0, 0, partialSpec.column_header);\r\n          } else {\r\n            this.storeColInfo({\r\n              row: this.colInfo.row,\r\n              column: this.colInfo.column,\r\n              len: this.colInfo.len + 1,\r\n            });\r\n            this.column_header.push(partialSpec.column_header);\r\n            if (this.colInfo.row + this.colInfo.len > this.rowInfo.row) {\r\n              this.storeRowInfo({\r\n                row: this.rowInfo.row,\r\n                column: this.rowInfo.column,\r\n                len: this.rowInfo.len + 1,\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if (partialSpec.body) {\r\n        this.body.push(partialSpec.body);\r\n      }\r\n\r\n      let spec = Utils.genSpec(this.row_header, this.column_header, this.body);\r\n      console.log(spec);\r\n\r\n      let sch = {\r\n        data: this.rawRelations,\r\n        target_table: [spec],\r\n      };\r\n      console.log(sch);\r\n      try {\r\n        let res = transform(sch)[0];\r\n        for (let i = 0; i < res.length; i++) {\r\n          for (let j = 0; j < res[i].length; j++) {\r\n            if (res[i][j]) {\r\n              let tmp = {};\r\n              tmp.source = spec[\"row_header\"];\r\n              tmp.value = res[i][j].value ? res[i][j].value : res[i][j];\r\n              res[i][j] = tmp;\r\n            }\r\n          }\r\n        }\r\n        // console.log(res);\r\n        let table = Utils.mapTable(res, this.rowInfo, this.colInfo);\r\n        console.log(table);\r\n        this.storeNewSpec(spec);\r\n        this.storeCurrentTable(table);\r\n      } catch (err) {\r\n        this.$message.error(\"Illegal specification!\");\r\n      }\r\n\r\n      this.storePartialSpecSuggestion(null);\r\n    },\r\n  },\r\n  components: {\r\n    Varunit,\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.suggestion-view {\r\n  width: 100%;\r\n  height: calc(100% - 20px);\r\n  overflow: hidden;\r\n}\r\n\r\n.suggestion-container {\r\n  min-height: 50px;\r\n  margin: 20px 0 auto 0;\r\n  border-radius: 4px;\r\n  border: 1px solid rgba(187, 187, 187, 100);\r\n  background: white;\r\n  overflow: hidden;\r\n}\r\n\r\n.suggestion-container .ant-collapse {\r\n  min-width: 0px;\r\n  font: 400 18px/24px Times;\r\n  text-align: left;\r\n}\r\n\r\n.suggestion-unit {\r\n  margin: 25px 20px 40px 20px;\r\n}\r\n\r\n.alter-unit::-webkit-scrollbar {\r\n  display: none; /* Chrome Safari */\r\n}\r\n\r\n.alter-unit {\r\n  height: 220px;\r\n  overflow: scroll;\r\n}\r\n\r\n.alter-panel {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  background-color: #eaebee;\r\n  padding: 5px 0px 5px 7px;\r\n  margin-bottom: 3px;\r\n}\r\n\r\n.alter-panel:hover {\r\n  background-color: #d8d5d5;\r\n}\r\n\r\n.variation-unit {\r\n  height: 250px;\r\n  overflow: scroll;\r\n}\r\n\r\n.variation-unit::-webkit-scrollbar {\r\n  display: none;\r\n}\r\n\r\n.suggestion-empty {\r\n  margin: 25px 20px 25px 20px;\r\n}\r\n\r\n.suggestionTitle {\r\n  font-size: 15px;\r\n  margin-bottom: 15px;\r\n  font-weight: bold;\r\n}\r\n\r\n.collapse-unit {\r\n  margin: 5px 9px 5px 9px;\r\n  width: calc(100% - 18px);\r\n}\r\n\r\n.suggestion-disambiguate {\r\n  height: 90%;\r\n  overflow: scroll;\r\n}\r\n\r\n.suggestion-disambiguate::-webkit-scrollbar {\r\n  display: none;\r\n}\r\n\r\n.partialspecpanel {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  background-color: #eaebee;\r\n  padding: 5px 0px 5px 7px;\r\n  margin-bottom: 3px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SuggestionView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SuggestionView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SuggestionView.vue?vue&type=template&id=4fabba60&scoped=true&\"\nimport script from \"./SuggestionView.vue?vue&type=script&lang=js&\"\nexport * from \"./SuggestionView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SuggestionView.vue?vue&type=style&index=0&id=4fabba60&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4fabba60\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div id=\"app\">\r\n    <div id=\"header-container\">\r\n      <header-view></header-view>\r\n    </div>\r\n    <div id=\"body-container\">\r\n      <div id=\"extractor-container\">\r\n        <div id=\"relation-container\">\r\n          <relation-view></relation-view>\r\n        </div>\r\n      </div>\r\n      <div id=\"spreadsheet-container\">\r\n        <spreadsheet-view></spreadsheet-view>\r\n      </div>\r\n      <div id=\"suggestion-container\">\r\n        <suggestion-view></suggestion-view>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport HeaderView from \"./components/HeaderView.vue\";\r\nimport RelationView from \"./components/RelationView.vue\";\r\nimport SpreadsheetView from \"./components/SpreadsheetView.vue\";\r\nimport SuggestionView from \"./components/SuggestionView.vue\";\r\n\r\nexport default {\r\n  name: \"App\",\r\n  components: {\r\n    HeaderView,\r\n    RelationView,\r\n    SpreadsheetView,\r\n    SuggestionView,\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\nbody {\r\n  margin: 0px;\r\n  width: 100vw;\r\n  height: 100vh;\r\n}\r\n\r\n#app {\r\n  width: 100%;\r\n  height: 100%;\r\n  /* min-width: 1680px; */\r\n  /* min-height: 1050px; */\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: #eee;\r\n}\r\n\r\n#header-container {\r\n  width: 100%;\r\n  height: 50px;\r\n  line-height: 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: rgba(245, 245, 245, 100);\r\n  border: 1px solid rgba(187, 187, 187, 100);\r\n}\r\n\r\n#body-container {\r\n  width: 100%;\r\n  height: calc(100% - 50px);\r\n  display: flex;\r\n  flex-direction: row;\r\n  background-color: rgba(247, 247, 247, 100);\r\n  text-align: center;\r\n  border: 1px solid rgba(187, 187, 187, 100);\r\n}\r\n\r\n#extractor-container {\r\n  flex: 0 0 500px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin: 15px 0 15px 15px;\r\n}\r\n\r\n#extractor-container #dataset-container {\r\n  flex: 0 0 525px;\r\n}\r\n\r\n#extractor-container #relation-container {\r\n  flex: 1 1;\r\n  overflow: hidden;\r\n}\r\n\r\n#spreadsheet-container {\r\n  flex: 1 1;\r\n  margin: 15px 0 15px 15px;\r\n}\r\n\r\n#suggestion-container {\r\n  flex: 0 0 450px;\r\n  margin: 15px;\r\n}\r\n\r\n.view {\r\n  padding: 15px 30px;\r\n}\r\n\r\n.view-title {\r\n  font: bold 28px/36px Times;\r\n  margin: 10px 0;\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=eb2c4818&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\r\nimport Vuex from \"vuex\";\r\n\r\nimport Utils from \"@/utils.js\";\r\nimport { EXTRACT_URL } from \"@/CONSTANT\";\r\nimport { W } from \"r-collapse-vue\";\r\n\r\nVue.use(Vuex);\r\n\r\nconst state = {\r\n  activatedRelationIndex: -1,\r\n  rawRelations: [],\r\n  relations: [],\r\n  attrInfo: [],\r\n  suggestions: [],\r\n  currentTable: undefined,\r\n  dragSourceIsCell: false,\r\n  associationRule: \"union\",\r\n  alterSpecList: [],\r\n  newSpec: null,\r\n  partialSpecSuggestion: null,\r\n  row_header: [],\r\n  column_header: [],\r\n  body: [],\r\n  currentActiveGrid: {},\r\n  rowInfo: {},\r\n  colInfo: {}\r\n};\r\n\r\nconst mutations = {\r\n  addRawRelation(state, relation) {\r\n    // relation.name = `Relation ${state.relations.length + 1}`;\r\n    state.rawRelations.push(relation);\r\n  },\r\n\r\n  addRelation(state, relation) {\r\n    // relation.name = `Relation ${state.relations.length + 1}`;\r\n    state.relations.push(relation);\r\n\r\n    if (state.relations.length === 1) {\r\n      state.activatedRelationIndex = 0;\r\n      // state.suggestions = Utils.generateSuggestions(relation, \"\");\r\n    }\r\n  },\r\n\r\n  addAttrInfo(state, attrInfo) {\r\n    state.attrInfo = state.attrInfo.concat(attrInfo);\r\n  },\r\n\r\n  changeActivatedRelationIndex(state, index) {\r\n    state.activatedRelationIndex = index;\r\n  },\r\n\r\n  removeRelationByIndex(state, index) {\r\n    state.relations.splice(index, 1);\r\n    if (index <= state.activatedRelationIndex) {\r\n      state.activatedRelationIndex--;\r\n    }\r\n  },\r\n\r\n  mutateDragSource(state, isCell) {\r\n    state.dragSourceIsCell = isCell;\r\n  },\r\n\r\n  changeSuggestion(state, suggestions) {\r\n    state.suggestions = suggestions;\r\n  },\r\n\r\n  changeCurrentTable(state, currentTable) {\r\n    state.currentTable = currentTable;\r\n  },\r\n\r\n  changeAssociationRule(state, newRule) {\r\n    state.associationRule = newRule;\r\n  },\r\n\r\n  changeAlterSpecList(state, newList) {\r\n    state.alterSpecList = newList;\r\n  },\r\n\r\n  changeNewSpec(state, newSpec) {\r\n    state.newSpec = newSpec;\r\n  },\r\n\r\n  changePartialSpecSuggestion(state, newSuggestion) {\r\n    state.partialSpecSuggestion = newSuggestion;\r\n  },\r\n\r\n  changeRowHeader(state, row_header) {\r\n    state.row_header = row_header;\r\n  },\r\n\r\n  changeColumnHeader(state, column_header) {\r\n    state.column_header = column_header;\r\n  },\r\n\r\n  changeBody(state, body) {\r\n    state.body = body;\r\n  },\r\n\r\n  changeCurrentActiveGrid(state, currentActiveGrid) {\r\n    state.currentActiveGrid = currentActiveGrid;\r\n  },\r\n\r\n  changeRowInfo(state, rowInfo) {\r\n    state.rowInfo = rowInfo;\r\n  },\r\n\r\n  changeColInfo(state, colInfo) {\r\n    state.colInfo = colInfo;\r\n  }\r\n};\r\n\r\nconst actions = {\r\n  // async extractRelationFromRawData({ commit }, rawData) {\r\n  //   const resp = await fetch(EXTRACT_URL, {\r\n  //     method: \"POST\",\r\n  //     headers: {\r\n  //       \"Content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\r\n  //     },\r\n  //     body: `data=${rawData}`,\r\n  //   });\r\n  //   if (resp.ok) {\r\n  //     const relation = await resp.json();\r\n  //     commit(\"addRelation\", relation);\r\n  //   } else {\r\n  //     throw new Error(resp.statusText);\r\n  //   }\r\n  // },\r\n  storeRawRelation({ commit }, relation) {\r\n    commit(\"addRawRelation\", relation);\r\n  },\r\n  storeRelation({ commit }, relation) {\r\n    commit(\"addRelation\", relation);\r\n  },\r\n  storeAttrInfo({ commit }, attrInfo) {\r\n    commit(\"addAttrInfo\", attrInfo);\r\n  },\r\n  setDragSource({ commit }, isCell) {\r\n    commit(\"mutateDragSource\", isCell);\r\n  },\r\n  storeSuggestion({ commit }, suggestions) {\r\n    commit(\"changeSuggestion\", suggestions);\r\n  },\r\n  storeCurrentTable({ commit }, currentTable) {\r\n    commit(\"changeCurrentTable\", currentTable);\r\n  },\r\n  storeAssociationRule({ commit }, newRule) {\r\n    commit(\"changeAssociationRule\", newRule);\r\n  },\r\n  storeAlterSpecList({ commit }, newList) {\r\n    commit(\"changeAlterSpecList\", newList);\r\n  },\r\n  storeNewSpec({ commit }, newSpec) {\r\n    commit(\"changeNewSpec\", newSpec);\r\n  },\r\n  storePartialSpecSuggestion({ commit }, newSuggestion) {\r\n    commit(\"changePartialSpecSuggestion\", newSuggestion);\r\n  },\r\n  // setRowHeader({ commit }, row_header) {\r\n  //   commit(\"changeRowHeader\", row_header);\r\n  // },\r\n  // setColumnHeader({ commit }, column_header) {\r\n  //   commit(\"changeColumnHeader\", column_header);\r\n  // },\r\n  // setBody({ commit }, body) {\r\n  //   commit(\"changeBody\", body);\r\n  // }\r\n  setSpec({ commit }, spec) {\r\n    commit(\"changeRowHeader\", spec.row_header);\r\n    commit(\"changeColumnHeader\", spec.column_header);\r\n    commit(\"changeBody\", spec.body);\r\n  },\r\n  storeCurrentActiveGrid({ commit }, currentActiveGrid) {\r\n    commit(\"changeCurrentActiveGrid\", currentActiveGrid);\r\n  },\r\n  storeRowInfo({ commit }, rowInfo) {\r\n    commit(\"changeRowInfo\", rowInfo);\r\n  },\r\n  storeColInfo({ commit }, colInfo) {\r\n    commit(\"changeColInfo\", colInfo);\r\n  }\r\n};\r\n\r\nexport default new Vuex.Store({\r\n  state,\r\n  mutations,\r\n  actions,\r\n});\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('r-collapse',{staticClass:\"collapse-demo\",attrs:{\"activeClass\":\"collapse-demo-active\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.activeKeys),callback:function ($$v) {_vm.activeKeys=$$v},expression:\"activeKeys\"}},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <r-collapse\r\n    v-model=\"activeKeys\"\r\n    class=\"collapse-demo\"\r\n    activeClass=\"collapse-demo-active\"\r\n    @change=\"handleChange\"\r\n  >\r\n    <slot/>\r\n  </r-collapse>\r\n</template>\r\n\r\n<script>\r\nimport { RCollapse, RCollapsePanel } from \"r-collapse-vue\";\r\nexport default {\r\n  name: \"Mycollapse\",\r\n  props: {\r\n    header: String\r\n  },\r\n  data() {\r\n    return {\r\n      activeKeys: [],\r\n    };\r\n  },\r\n  methods: {\r\n    handleChange(newActiveKeys, oldActiveKeys) {\r\n      console.log(\"newActiveKeys\", newActiveKeys);\r\n      console.log(\"oldActiveKeys\", oldActiveKeys);\r\n    },\r\n  },\r\n  components: {\r\n    RCollapse,\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.collapse-demo {\r\n  width: 100%;\r\n  cursor: pointer;\r\n  // .collapse-demo-panel.collapse-demo-active {\r\n  //   .collapse-fixed > i {\r\n  //     transform: rotate(180deg) !important;\r\n  //   }\r\n  // }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=4a37db9f&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('r-collapse-panel',{staticClass:\"collapse-demo-panel\"},[_c('template',{slot:\"fixed\"},[_c('div',{staticClass:\"collapse-fixed\",on:{\"click\":this.handleClick}},[_c('div',{staticStyle:{\"pointer-events\":\"none\"}},[_vm._v(_vm._s(this.header))]),_c('i',{staticClass:\"icon iconfont\",staticStyle:{\"transition\":\"all 0.3s\"}},[_vm._v(\"\")])])]),_c('div',{staticClass:\"collapse-content\"},[_vm._t(\"default\"),(this.firstClick)?_c('Varunit',{attrs:{\"spec\":this.spec}}):_vm._e()],2)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <r-collapse-panel class=\"collapse-demo-panel\">\r\n    <template slot=\"fixed\">\r\n      <div class=\"collapse-fixed\" @click=\"this.handleClick\">\r\n        <div style=\"pointer-events: none\">{{ this.header }}</div>\r\n        <i class=\"icon iconfont\" style=\"transition: all 0.3s\">&#xe65b;</i>\r\n      </div>\r\n    </template>\r\n    <!-- <div class=\"collapse-content\">这是Panel 1的内容</div> -->\r\n    <div class=\"collapse-content\">\r\n      <slot />\r\n      <Varunit v-if=\"this.firstClick\" :spec=\"this.spec\" />\r\n    </div>\r\n  </r-collapse-panel>\r\n</template>\r\n\r\n<script>\r\nimport { RCollapse, RCollapsePanel } from \"r-collapse-vue\";\r\n\r\n// import Varunit from \"../Varunit/Index.vue\";\r\nexport default {\r\n  name: \"Mycollapsepanel\",\r\n  props: {\r\n    header: String,\r\n    spec: {\r\n      type: Object,\r\n      default: undefined,\r\n    },\r\n    applySpec: {\r\n      type: Object,\r\n      default: undefined,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      activeKeys: [],\r\n      firstClick: false,\r\n    };\r\n  },\r\n  // watch: {\r\n  //   spec(val, oldval) {\r\n  //     if (val != oldval) {\r\n  //       this.firstClick = false;\r\n  //     }\r\n  //   },\r\n  // },\r\n  methods: {\r\n    handleChange(newActiveKeys, oldActiveKeys) {\r\n      console.log(\"newActiveKeys\", newActiveKeys);\r\n      console.log(\"oldActiveKeys\", oldActiveKeys);\r\n    },\r\n    handleClick(e) {\r\n      console.log(e.target.lastChild);\r\n      if (e.target.tagName == \"I\") {\r\n        let className = e.target.className;\r\n        let index = className ? className.indexOf(\"active\") : -1;\r\n        if (index != -1) {\r\n          e.target.style.transform = \"rotate(0)\";\r\n          let newstr = className.substr(0, index - 1);\r\n          e.target.className = newstr;\r\n        } else {\r\n          e.target.style.transform = \"rotate(180deg)\";\r\n          e.target.className += \" active\";\r\n        }\r\n      } else {\r\n        let className = e.target.lastChild.className;\r\n        let index = className ? className.indexOf(\"active\") : -1;\r\n        if (index != -1) {\r\n          e.target.lastChild.style.transform = \"rotate(0)\";\r\n          let newstr = className.substr(0, index - 1);\r\n          e.target.lastChild.className = newstr;\r\n        } else {\r\n          e.target.lastChild.style.transform = \"rotate(180deg)\";\r\n          e.target.lastChild.className += \" active\";\r\n        }\r\n      }\r\n      this.firstClick = true;\r\n      // e.stopPropagation();\r\n    },\r\n  },\r\n  components: {\r\n    // RCollapse,\r\n    RCollapsePanel,\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.collapse-demo-panel {\r\n  .collapse-fixed {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    background-color: #eaebee;\r\n    padding: 5px 0px 5px 7px;\r\n    margin-bottom: 3px;\r\n    //   padding: 10px;\r\n    // > i {\r\n    // \t// font-size: 12px;\r\n    // \ttransform: scale(1);\r\n    // \ttransition: transform 0.3s;\r\n    // }\r\n  }\r\n}\r\n.collapse-content {\r\n  padding: 5px 0px 5px 7px;\r\n  text-align: left;\r\n}\r\n\r\n.icon {\r\n  font-size: 14px !important;\r\n  width: 15px;\r\n  height: 18px;\r\n  margin-right: 5px;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=841840b2&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\r\nimport App from \"./App.vue\";\r\nimport store from \"./store\";\r\n\r\nimport { Select, Input, Button, Tabs, Collapse, message, Radio, Checkbox, InputNumber, Switch, Empty } from \"ant-design-vue\";\r\nimport \"ant-design-vue/dist/antd.css\";\r\nimport './assets/icons/iconfont/iconfont.css';\r\nimport Mycollapse from \"./components/Mycollapse/Index.vue\";\r\nimport Mycollapsepanel from \"./components/Mycollapsepanel/Index.vue\";\r\nimport Varunit from \"./components/Varunit/Index.vue\";\r\n\r\nVue.config.productionTip = false;\r\n\r\nVue.use(Select);\r\nVue.use(Input);\r\nVue.use(Button);\r\nVue.use(Tabs);\r\nVue.use(Collapse);\r\nVue.use(Radio);\r\nVue.use(Checkbox);\r\nVue.use(InputNumber);\r\nVue.use(Switch);\r\nVue.use(Empty);\r\nVue.component(Mycollapse.name, Mycollapse);\r\nVue.component(Mycollapsepanel.name, Mycollapsepanel);\r\nVue.component(Varunit.name, Varunit);\r\nVue.prototype.$message = message;\r\n\r\nnew Vue({\r\n  store,\r\n  render: (h) => h(App),\r\n}).$mount(\"#app\");\r\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RelationView.vue?vue&type=style&index=0&id=cc5791ce&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SuggestionView.vue?vue&type=style&index=0&id=4fabba60&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpreadsheetView.vue?vue&type=style&index=0&id=2b0b1973&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderView.vue?vue&type=style&index=0&id=1e227586&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&id=17247de8&scoped=true&lang=css&\""],"sourceRoot":""}